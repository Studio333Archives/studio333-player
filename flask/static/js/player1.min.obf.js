const DEBUG_GUI_SYNC=!0x0,STORAGE_KEY='blobPlayerState.v1';function log(..._0x4c146a){console['debug']('[GUI]',..._0x4c146a);}import*as a0_0x5014a3 from'three';import{OrbitControls}from'three/addons/controls/OrbitControls.js';import{GUI}from'lil-gui';import{SimplexNoise}from'three/addons/math/SimplexNoise.js';const container=document['getElementById']('app'),renderer=new a0_0x5014a3['WebGLRenderer']({'antialias':!0x0,'powerPreference':'high-performance'});renderer['setPixelRatio'](Math['min'](devicePixelRatio,0x2)),renderer['setSize'](container['clientWidth'],container['clientHeight']),renderer['setClearColor'](0x0,0x1),renderer['outputColorSpace']=a0_0x5014a3['SRGBColorSpace'],renderer['physicallyCorrectLights']=!0x0,container['appendChild'](renderer['domElement']);const scene=new a0_0x5014a3['Scene'](),camera=new a0_0x5014a3['PerspectiveCamera'](0x32,container['clientWidth']/container['clientHeight'],0.1,0x7530);camera['position']['set'](0x0,1.6,3.5),scene['add'](new a0_0x5014a3['AmbientLight'](0xffffff,0.02));const rim=new a0_0x5014a3['DirectionalLight'](0xffffff,0.18);rim['position']['set'](-0x3,0x2,-0x2),scene['add'](rim);const pool=new a0_0x5014a3['SpotLight'](0xff66cc,0x4,3.2,0.18*Math['PI'],0.55,0x2);pool['position']['set'](0x0,1.6,0x0),pool['target']['position']['set'](0x0,0x0,0x0),scene['add'](pool,pool['target']);const fadeGeo=new a0_0x5014a3['PlaneGeometry'](0x28,0x28),fadeMat=new a0_0x5014a3['ShaderMaterial']({'transparent':!0x0,'depthWrite':!0x1,'uniforms':{'uRadius':{'value':1.6},'uSoft':{'value':1.2}},'vertexShader':'varying\x20vec2\x20vXZ;\x20void\x20main(){\x20vec4\x20wp\x20=\x20modelMatrix\x20*\x20vec4(position,1.0);\x20vXZ\x20=\x20wp.xz;\x20gl_Position\x20=\x20projectionMatrix\x20*\x20viewMatrix\x20*\x20wp;\x20}','fragmentShader':'precision\x20highp\x20float;\x20uniform\x20float\x20uRadius,uSoft;\x20varying\x20vec2\x20vXZ;\x20void\x20main(){\x20float\x20r=length(vXZ);\x20float\x20a=smoothstep(uRadius,uRadius+uSoft,r);\x20gl_FragColor=vec4(0.,0.,0.,a);\x20}'}),fade=new a0_0x5014a3['Mesh'](fadeGeo,fadeMat);fade['rotation']['x']=0.5*-Math['PI'],fade['position']['y']=0.0005,scene['add'](fade);const simplexGLSL='\x0a\x20\x20\x20\x20\x20\x20vec3\x20mod289(vec3\x20x){\x20return\x20x\x20-\x20floor(x\x20*\x20(1.0\x20/\x20289.0))\x20*\x20289.0;\x20}\x0a\x20\x20\x20\x20\x20\x20vec4\x20mod289(vec4\x20x){\x20return\x20x\x20-\x20floor(x\x20*\x20(1.0\x20/\x20289.0))\x20*\x20289.0;\x20}\x0a\x20\x20\x20\x20\x20\x20vec4\x20permute(vec4\x20x){\x20return\x20mod289(((x*34.0)+1.0)*x);\x20}\x0a\x20\x20\x20\x20\x20\x20vec4\x20taylorInvSqrt(vec4\x20r){\x20return\x201.79284291400159\x20-\x200.85373472095314\x20*\x20r;\x20}\x0a\x20\x20\x20\x20\x20\x20float\x20snoise(vec3\x20v){\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20vec2\x20\x20C\x20=\x20vec2(1.0/6.0,\x201.0/3.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20vec4\x20\x20D\x20=\x20vec4(0.0,\x200.5,\x201.0,\x202.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20i\x20\x20=\x20floor(v\x20+\x20dot(v,\x20C.yyy));\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20x0\x20=\x20v\x20-\x20i\x20+\x20dot(i,\x20C.xxx);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20g\x20=\x20step(x0.yzx,\x20x0.xyz);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20l\x20=\x201.0\x20-\x20g;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20i1\x20=\x20min(g.xyz,\x20l.zxy);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20i2\x20=\x20max(g.xyz,\x20l.zxy);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20x1\x20=\x20x0\x20-\x20i1\x20+\x20C.xxx;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20x2\x20=\x20x0\x20-\x20i2\x20+\x202.0*C.xxx;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20x3\x20=\x20x0\x20-\x201.0\x20+\x203.0*C.xxx;\x0a\x20\x20\x20\x20\x20\x20\x20\x20i\x20=\x20mod289(i);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20p\x20=\x20permute(\x20permute(\x20permute(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.z\x20+\x20vec4(0.0,\x20i1.z,\x20i2.z,\x201.0))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20+\x20i.y\x20+\x20vec4(0.0,\x20i1.y,\x20i2.y,\x201.0))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20+\x20i.x\x20+\x20vec4(0.0,\x20i1.x,\x20i2.x,\x201.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20n_\x20=\x201.0/7.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20\x20ns\x20=\x20n_\x20*\x20D.wyz\x20-\x20D.xzx;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20j\x20=\x20p\x20-\x2049.0\x20*\x20floor(p\x20*\x20ns.z\x20*\x20ns.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20x_\x20=\x20floor(j\x20*\x20ns.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20y_\x20=\x20floor(j\x20-\x207.0\x20*\x20x_);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20x\x20=\x20x_\x20*ns.x\x20+\x20ns.yyyy;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20y\x20=\x20y_\x20*ns.x\x20+\x20ns.yyyy;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20h\x20=\x201.0\x20-\x20abs(x)\x20-\x20abs(y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20b0\x20=\x20vec4(\x20x.xy,\x20y.xy\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20b1\x20=\x20vec4(\x20x.zw,\x20y.zw\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20s0\x20=\x20floor(b0)*2.0\x20+\x201.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20s1\x20=\x20floor(b1)*2.0\x20+\x201.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20sh\x20=\x20-step(h,\x20vec4(0.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20a0\x20=\x20b0.xzyw\x20+\x20s0.xzyw*sh.xxyy;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20a1\x20=\x20b1.xzyw\x20+\x20s1.xzyw*sh.zzww;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20p0\x20=\x20vec3(a0.xy,h.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20p1\x20=\x20vec3(a0.zw,h.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20p2\x20=\x20vec3(a1.xy,h.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20p3\x20=\x20vec3(a1.zw,h.w);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20norm\x20=\x20taylorInvSqrt(vec4(dot(p0,p0),\x20dot(p1,p1),\x20dot(p2,p2),\x20dot(p3,p3)));\x0a\x20\x20\x20\x20\x20\x20\x20\x20p0\x20*=\x20norm.x;\x20p1\x20*=\x20norm.y;\x20p2\x20*=\x20norm.z;\x20p3\x20*=\x20norm.w;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20m\x20=\x20max(0.6\x20-\x20vec4(dot(x0,x0),\x20dot(x1,x1),\x20dot(x2,x2),\x20dot(x3,x3)),\x200.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20m\x20=\x20m*m;\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x2042.0\x20*\x20dot(m*m,\x20vec4(dot(p0,x0),\x20dot(p1,x1),\x20dot(p2,x2),\x20dot(p3,p3)));\x0a\x20\x20}',uiPanel=document['getElementById']('ui'),webcamBtn=document['getElementById']('webcamBtn'),imgInput=document['getElementById']('imgInput'),vidInput=document['getElementById']('vidInput'),audioInput=document['getElementById']('audioInput'),clearBtn=document['getElementById']('clearBtn'),startBtn=document['getElementById']('startBtn'),prevBtn=document['getElementById']('prevBtn'),nextBtn=document['getElementById']('nextBtn'),loopChk=document['getElementById']('loopChk'),playlistSelect=document['getElementById']('playlistSelect');let uiVisible=!0x1;function applyUIVisibility(){uiPanel['style']['display']=uiVisible?'flex':'none';const _0x13bc56=document['querySelector']('.lil-gui.root');_0x13bc56&&(_0x13bc56['style']['display']=uiVisible?'':'none');}const searchBtn=document['getElementById']('searchToggle'),searchBox=document['getElementById']('searchPanel'),playlistSel=document['getElementById']('playlistSelect');let __wasUiVisible=null,__wasSearchOpen=!0x1;function isFs(){return!!(document['fullscreenElement']||document['webkitFullscreenElement']||document['mozFullScreenElement']||document['msFullscreenElement']);}function enterFs(){const _0x4ec8ec=document['documentElement'];(_0x4ec8ec['requestFullscreen']||_0x4ec8ec['webkitRequestFullscreen']||_0x4ec8ec['mozRequestFullScreen']||_0x4ec8ec['msRequestFullscreen'])['call'](_0x4ec8ec);}function exitFs(){(document['exitFullscreen']||document['webkitExitFullscreen']||document['mozCancelFullScreen']||document['msExitFullscreen'])['call'](document);}function hideChrome(_0x29a1bf){_0x29a1bf?(__wasUiVisible=uiVisible,__wasSearchOpen=!(!searchBox||searchBox['classList']['contains']('hidden')),uiVisible=!0x1,applyUIVisibility(),searchBtn&&searchBtn['classList']['add']('hidden'),playlistSel&&playlistSel['classList']['add']('hidden'),searchBox&&searchBox['classList']['add']('hidden')):(null!==__wasUiVisible&&(uiVisible=__wasUiVisible,__wasUiVisible=null),applyUIVisibility(),searchBtn&&searchBtn['classList']['remove']('hidden'),playlistSel&&playlistSel['classList']['remove']('hidden'),searchBox&&(__wasSearchOpen?searchBox['classList']['remove']('hidden'):searchBox['classList']['add']('hidden')));}document['addEventListener']('keydown',_0x3b81a1=>{const _0x185f93=(_0x3b81a1['key']||_0x3b81a1['code']||'')['toLowerCase'](),_0x2fbc30=_0x3b81a1['target'],_0x58881d=_0x2fbc30&&_0x2fbc30['tagName']?_0x2fbc30['tagName']['toUpperCase']():'',_0x4a7165=!!_0x2fbc30&&(_0x2fbc30['isContentEditable']||'INPUT'===_0x58881d||'TEXTAREA'===_0x58881d||'SELECT'===_0x58881d),_0xcdad=document['getElementById']('searchPanel'),_0x54a4ab=!(!_0xcdad||_0xcdad['classList']['contains']('hidden'));if('escape'===_0x185f93)return uiVisible=!uiVisible,applyUIVisibility(),void _0x3b81a1['preventDefault']();if(!(_0x4a7165||_0x54a4ab||_0x3b81a1['metaKey']||_0x3b81a1['ctrlKey']||_0x3b81a1['altKey']||_0x3b81a1['defaultPrevented'])){if('f'===_0x185f93)return isFs()?(exitFs(),hideChrome(!0x1)):(enterFs(),hideChrome(!0x0)),void _0x3b81a1['preventDefault']();if('arrowleft'!==_0x185f93){if('arrowright'!==_0x185f93);else{if(Array['isArray'](playlist)&&playlist['length']&&'function'==typeof nextInPlaylist){try{autoAdvance=!0x1;}catch{}nextInPlaylist(),_0x3b81a1['preventDefault']();}}}else{if(Array['isArray'](playlist)&&playlist['length']&&'function'==typeof prevInPlaylist){try{autoAdvance=!0x1;}catch{}prevInPlaylist(),_0x3b81a1['preventDefault']();}}}},{'passive':!0x1}),['fullscreenchange','webkitfullscreenchange','mozfullscreenchange','MSFullscreenChange']['forEach'](_0x445f89=>document['addEventListener'](_0x445f89,()=>{isFs()||hideChrome(!0x1);}));const source={'type':'none','tex':null,'stream':null,'videoEl':null,'imageEl':null,'audioEl':null,'spectrumCanvas':null,'spectrumCtx':null,'spectrumTex':null};function resolveUrl(_0x5d9916){try{return new URL(_0x5d9916,location['href'])['href'];}catch(_0x4b419c){return _0x5d9916;}}function videoHasFrame(_0x56db42){return _0x56db42&&_0x56db42['readyState']>=0x2&&_0x56db42['videoWidth']>0x0&&_0x56db42['videoHeight']>0x0;}let audioCtx=null,analyser=null,freqData=null,audioSrcNode=null,streamSrcNode=null,audioElNode=null;const MEDIA_NODE=new WeakMap();async function ensureAudioCtx(){audioCtx||(audioCtx=new(window['AudioContext']||window['webkitAudioContext'])(),analyser=audioCtx['createAnalyser'](),analyser['fftSize']=0x200,analyser['smoothingTimeConstant']=0.72,freqData=new Uint8Array(analyser['frequencyBinCount']));}function disconnectAudio(){try{audioSrcNode&&audioSrcNode['disconnect']();}catch(_0x50bc6c){}try{streamSrcNode&&streamSrcNode['disconnect']();}catch(_0x4d5cd5){}try{audioElNode&&audioElNode['disconnect']();}catch(_0x1b4fbd){}audioSrcNode=streamSrcNode=audioElNode=null;}function connectVideoElAudio(_0x117659){if(!_0x117659||!audioCtx)return;disconnectAudio();let _0x3c59b9=MEDIA_NODE['get'](_0x117659);if(!_0x3c59b9)try{_0x3c59b9=audioCtx['createMediaElementSource'](_0x117659),MEDIA_NODE['set'](_0x117659,_0x3c59b9);}catch(_0x5ba502){return;}audioSrcNode=_0x3c59b9;try{audioSrcNode['connect'](analyser),audioSrcNode['connect'](audioCtx['destination']);}catch(_0x4cef55){}}function connectStreamAudio(_0x4de244){if(_0x4de244&&audioCtx){disconnectAudio();try{streamSrcNode=audioCtx['createMediaStreamSource'](_0x4de244),streamSrcNode['connect'](analyser);}catch(_0x26b0a8){}}}function connectAudioEl(_0x227108){if(!_0x227108||!audioCtx)return;disconnectAudio();let _0x5aff64=MEDIA_NODE['get'](_0x227108);if(!_0x5aff64)try{_0x5aff64=audioCtx['createMediaElementSource'](_0x227108),MEDIA_NODE['set'](_0x227108,_0x5aff64);}catch(_0x1bd8d7){return;}audioElNode=_0x5aff64;try{audioElNode['connect'](analyser),audioElNode['connect'](audioCtx['destination']);}catch(_0x1ad9e1){}}let hls=null,dash=null;function destroyABR(){if(hls){try{hls['destroy']();}catch(_0x501918){}hls=null;}if(dash){try{dash['reset']();}catch(_0x2261e5){}dash=null;}}function setTexture(_0x2a4d43){source['tex']=_0x2a4d43,sphereMat['uniforms']['uTex']['value']=_0x2a4d43,reflectMatBottom['uniforms']['uTex']['value']=_0x2a4d43,reflectMatTop['uniforms']['uTex']['value']=_0x2a4d43,spherePointsMat['uniforms']['uTex']['value']=_0x2a4d43;const _0x20cf72=_0x2a4d43?0x1:0x0;sphereMat['uniforms']['uUseTex']['value']=_0x20cf72,reflectMatBottom['uniforms']['uUseTex']['value']=_0x20cf72,reflectMatTop['uniforms']['uUseTex']['value']=_0x20cf72,spherePointsMat['uniforms']['uUseTex']['value']=_0x20cf72;}function stopWebcam(){source['stream']&&(source['stream']['getTracks']()['forEach'](_0x49c862=>_0x49c862['stop']()),source['stream']=null),source['videoEl']&&source['videoEl']['srcObject']&&(source['videoEl']['srcObject']=null);}function clearAudio(){if(source['audioEl']){try{source['audioEl']['pause']();}catch(_0x3a3e80){}source['audioEl']['removeAttribute']('src'),source['audioEl']['load'](),source['audioEl']=null;}if(source['spectrumTex'])try{source['spectrumTex']['dispose']();}catch(_0xadf8cf){}source['spectrumTex']=null,source['spectrumCanvas']=null,source['spectrumCtx']=null;}function clearVideoFile(){if(source['videoEl']&&'video'===source['type']){try{source['videoEl']['pause']();}catch(_0x1c68d1){}source['videoEl']['removeAttribute']('src'),source['videoEl']['load']();}}function clearImage(){source['imageEl']=null;}function clearSource(){destroyABR(),stopWebcam(),clearAudio(),disconnectAudio(),clearVideoFile(),clearImage(),setTexture(null),source['type']='none',webcamBtn['textContent']='Webcam:\x20OFF';}function getOrCreateVideo(){if(source['videoEl'])return source['videoEl'];const _0x1a1a85=document['createElement']('video');return _0x1a1a85['autoplay']=!0x0,_0x1a1a85['playsInline']=!0x0,_0x1a1a85['muted']=!0x1,_0x1a1a85['loop']=!0x1,_0x1a1a85['crossOrigin']='anonymous',source['videoEl']=_0x1a1a85,_0x1a1a85;}async function awaitCanPlay(_0x34c056){videoHasFrame(_0x34c056)||await new Promise((_0x5818e3,_0x53c5e1)=>{const _0x223d16=()=>{_0x1c76ad(),_0x5818e3();},_0x11f9aa=()=>{_0x1c76ad(),_0x53c5e1(new Error('[Media]\x20video\x20error'));},_0x1c76ad=()=>{_0x34c056['removeEventListener']('canplay',_0x223d16),_0x34c056['removeEventListener']('loadeddata',_0x223d16),_0x34c056['removeEventListener']('error',_0x11f9aa);};_0x34c056['addEventListener']('canplay',_0x223d16,{'once':!0x0}),_0x34c056['addEventListener']('loadeddata',_0x223d16,{'once':!0x0}),_0x34c056['addEventListener']('error',_0x11f9aa,{'once':!0x0});});}async function tryPlay(_0x5317d8){try{return await _0x5317d8['play'](),!0x0;}catch(_0x53ab1f){return!0x1;}}function buildSpectrumTexture(_0x3b56ad=0x100,_0x3bae4f=0x100){const _0x21f313=document['createElement']('canvas');_0x21f313['width']=_0x3b56ad,_0x21f313['height']=_0x3bae4f;const _0x27bd08=_0x21f313['getContext']('2d'),_0x187d51=new a0_0x5014a3['CanvasTexture'](_0x21f313);return _0x187d51['colorSpace']=a0_0x5014a3['SRGBColorSpace'],_0x187d51['minFilter']=a0_0x5014a3['LinearFilter'],_0x187d51['magFilter']=a0_0x5014a3['LinearFilter'],source['spectrumCanvas']=_0x21f313,source['spectrumCtx']=_0x27bd08,source['spectrumTex']=_0x187d51,_0x187d51;}function drawSpectrumTexture(){if(!source['spectrumCtx']||!freqData)return;const _0x204515=source['spectrumCtx'],{width:_0xd48619,height:_0xdac363}=source['spectrumCanvas'];_0x204515['fillStyle']='#000',_0x204515['fillRect'](0x0,0x0,_0xd48619,_0xdac363);const _0x2c496a=freqData['length'],_0x4d04d9=_0xd48619/_0x2c496a;for(let _0xebc566=0x0;_0xebc566<_0x2c496a;_0xebc566++){const _0x446530=freqData[_0xebc566]/0xff,_0x1e1f0e=_0x446530*_0xdac363,_0x189284=_0x204515['createLinearGradient'](0x0,_0xdac363-_0x1e1f0e,0x0,_0xdac363);_0x189284['addColorStop'](0x0,'rgba('+Math['floor'](0xff*_0x446530)+','+Math['floor'](0xff*(0x1-_0x446530))+',255,1)'),_0x189284['addColorStop'](0x1,'rgba(80,80,120,1)'),_0x204515['fillStyle']=_0x189284,_0x204515['fillRect'](_0xebc566*_0x4d04d9,_0xdac363-_0x1e1f0e,Math['max'](0x1,_0x4d04d9-0x1),_0x1e1f0e);}source['spectrumTex']&&(source['spectrumTex']['needsUpdate']=!0x0);}function encodePath(_0x436763){return _0x436763['split']('/')['map'](encodeURIComponent)['join']('/');}function mediaTypeFromExt(_0x2905d6){const _0x1e0e46=_0x2905d6['split']('.')['pop']()?.['toLowerCase']()||'';return['mp3','wav','ogg','m4a','flac','aac']['includes'](_0x1e0e46)?'audio':['mp4','webm','ogv','mov','m4v']['includes'](_0x1e0e46)?'video':['jpg','jpeg','png','gif','webp','bmp']['includes'](_0x1e0e46)?'image':'m3u8'===_0x1e0e46?'hls':'mpd'===_0x1e0e46?'dash':'unknown';}function parseTreeToFiles(_0x43a5c2){const _0x31b7ba=[],_0x346c7=[],_0x5e422f=_0x43a5c2['split']('\x0a'),_0x3a878a=/^([\s│]*)(?:├──|└──)\s+([^.\n\r]+)$/,_0x4fa88f=/^([\s│]*)(?:├──|└──)\s+(.+\.[A-Za-z0-9]+)$/,_0x2d6ca0=_0xf1c1ea=>(_0xf1c1ea['match'](/│/g)||[])['length'];for(let _0x1e8711 of _0x5e422f){const _0x59e686=_0x1e8711['replace'](/\r/g,'')['trimEnd']();if(!_0x59e686)continue;let _0x3d0344=_0x59e686['match'](_0x3a878a);if(_0x3d0344){const _0x3a2818=_0x2d6ca0(_0x3d0344[0x1]),_0x5518d4=_0x3d0344[0x2]['trim']();_0x346c7[_0x3a2818]=_0x5518d4,_0x346c7['length']=_0x3a2818+0x1;continue;}if(_0x3d0344=_0x59e686['match'](_0x4fa88f),_0x3d0344){const _0x341278=_0x2d6ca0(_0x3d0344[0x1]),_0x3adbbc=_0x3d0344[0x2]['trim'](),_0x1fdef2=_0x346c7['slice'](0x0,_0x341278+0x1)['filter'](Boolean),_0x11a4b8=(_0x1fdef2['length']?_0x1fdef2['join']('/')+'/':'')+_0x3adbbc;_0x31b7ba['push'](_0x11a4b8);}}return _0x31b7ba;}function buildPlaylist(_0x233259,_0x309c16='.'){const _0x47edb4=[];for(const _0x2025dd of _0x233259){const _0x1f6e79=mediaTypeFromExt(_0x2025dd);if('unknown'===_0x1f6e79)continue;const _0x400d26=('.'===_0x309c16?'':_0x309c16['replace'](/\/+$/,'')+'/')+encodePath(_0x2025dd);_0x47edb4['push']({'type':_0x1f6e79,'label':_0x2025dd,'url':_0x400d26});}return _0x47edb4['sort']((_0x2c5bbc,_0x53451b)=>{const _0x1f3728={'hls':0x0,'dash':0x1,'video':0x2,'image':0x3,'audio':0x4,'unknown':0x5};return _0x1f3728[_0x2c5bbc['type']]!==_0x1f3728[_0x53451b['type']]?_0x1f3728[_0x2c5bbc['type']]-_0x1f3728[_0x53451b['type']]:_0x2c5bbc['label']['localeCompare'](_0x53451b['label'],void 0x0,{'numeric':!0x0,'sensitivity':'base'});}),_0x47edb4;}async function loadPlaylistFromTreeFile(_0x129c26,_0x25097b='.'){try{const _0x2288b4=await fetch(_0x129c26,{'cache':'no-store'});if(!_0x2288b4['ok'])throw new Error(_0x2288b4['status']+'\x20'+_0x2288b4['statusText']);const _0x19d368=await _0x2288b4['text'](),_0x1419eb=buildPlaylist(parseTreeToFiles(_0x19d368),_0x25097b);return _0x1419eb['length']?(playlist['length']=0x0,playlist['push'](..._0x1419eb),refreshPlaylistSelect(),console['info']('[Playlist]\x20Loaded\x20from\x20tree:',playlist['length'],'items'),!0x0):(console['warn']('[Playlist]\x20Tree\x20parsed\x20but\x20no\x20playable\x20media\x20found.'),!0x1);}catch(_0x3e9915){return console['error']('[Playlist]\x20Failed\x20to\x20load\x20from\x20tree',_0x3e9915),!0x1;}}const playlist=[];let currentIndex=0x0,autoAdvance=!0x0;function refreshPlaylistSelect(){playlistSelect['innerHTML']='',playlist['forEach']((_0x3e0c70,_0x1192c1)=>{const _0x23a277=document['createElement']('option');_0x23a277['value']=String(_0x1192c1),_0x23a277['textContent']=_0x1192c1+0x1+'.\x20['+_0x3e0c70['type']+']\x20'+_0x3e0c70['label'],playlistSelect['appendChild'](_0x23a277);}),playlist['length']&&(playlistSelect['value']=String(currentIndex));}const BASE_MEDIA_PATH='media/archives',TREE_FILE_PATH='media/archives/audioteka.txt';async function loadPlaylistIndex(_0xf1f737){if(_0xf1f737<0x0||_0xf1f737>=playlist['length'])return!0x1;if(autoAdvance=!0x0,currentIndex=_0xf1f737,refreshPlaylistSelect(),schedulePersist(),await ensureAudioCtx(),audioCtx&&'suspended'===audioCtx['state'])try{await audioCtx['resume']();}catch(_0x1e5073){}const _0x5e4d94=playlist[_0xf1f737];if(destroyABR(),'image'!==_0x5e4d94['type']&&clearImage(),'webcam'!==_0x5e4d94['type']&&stopWebcam(),clearAudio(),disconnectAudio(),setTexture(null),'webcam'===_0x5e4d94['type'])try{const _0x469f3e=await navigator['mediaDevices']['getUserMedia']({'video':{'facingMode':'user'},'audio':!0x0}),_0x2c1871=getOrCreateVideo();_0x2c1871['muted']=!0x0,_0x2c1871['srcObject']=_0x469f3e,await awaitCanPlay(_0x2c1871),await tryPlay(_0x2c1871);const _0x38b90c=new a0_0x5014a3['VideoTexture'](_0x2c1871);return _0x38b90c['colorSpace']=a0_0x5014a3['SRGBColorSpace'],_0x38b90c['minFilter']=a0_0x5014a3['LinearFilter'],_0x38b90c['magFilter']=a0_0x5014a3['LinearFilter'],clearVideoFile(),source['type']='webcam',source['stream']=_0x469f3e,setTexture(_0x38b90c),connectStreamAudio(_0x469f3e),webcamBtn['textContent']='Webcam:\x20ON',schedulePersist(),!0x0;}catch(_0x44c981){return console['error']('[Webcam]\x20failed',_0x44c981),!0x1;}if('image'===_0x5e4d94['type'])try{const _0x59baa8=new Image();_0x59baa8['crossOrigin']='anonymous',await new Promise((_0x195948,_0x37bbbe)=>{_0x59baa8['onload']=_0x195948,_0x59baa8['onerror']=_0x37bbbe,_0x59baa8['src']=resolveUrl(_0x5e4d94['url']);});const _0x3064a2=new a0_0x5014a3['Texture'](_0x59baa8);return _0x3064a2['needsUpdate']=!0x0,_0x3064a2['colorSpace']=a0_0x5014a3['SRGBColorSpace'],source['type']='image',source['imageEl']=_0x59baa8,setTexture(_0x3064a2),schedulePersist(),!0x0;}catch(_0x4a1edf){return console['error']('[Image]\x20load\x20failed',_0x5e4d94['url'],_0x4a1edf),!0x1;}if('audio'===_0x5e4d94['type'])try{if(await ensureAudioCtx(),audioCtx&&'suspended'===audioCtx['state'])try{await audioCtx['resume']();}catch{}destroyABR(),stopWebcam(),clearVideoFile(),clearImage(),clearAudio(),disconnectAudio(),setTexture(null);const _0x278b16=new Audio();_0x278b16['crossOrigin']='anonymous',_0x278b16['autoplay']=!0x0,_0x278b16['loop']=!0x1,_0x278b16['src']=resolveUrl(_0x5e4d94['url']),_0x278b16['onended']=()=>{autoAdvance&&nextInPlaylist();},_0x278b16['onerror']=()=>{autoAdvance&&nextInPlaylist();};if(!await tryPlay(_0x278b16))return!0x1;connectAudioEl(_0x278b16);const _0x2b0813=buildSpectrumTexture(0x100,0x100);return source['type']='audio',source['audioEl']=_0x278b16,setTexture(_0x2b0813),schedulePersist(),!0x0;}catch(_0x2aa7c){return console['error']('[Audio]\x20setup\x20failed',_0x2aa7c),!0x1;}try{const _0x4281ae=getOrCreateVideo();_0x4281ae['crossOrigin']='anonymous',_0x4281ae['loop']=!0x1;let _0x11fb72=!0x1;const _0x4c8a66=resolveUrl(_0x5e4d94['url']);if('hls'===_0x5e4d94['type']){if(_0x4281ae['canPlayType']('application/vnd.apple.mpegurl'))_0x4281ae['src']=_0x4c8a66,await awaitCanPlay(_0x4281ae),_0x11fb72=await tryPlay(_0x4281ae);else{if(!window['Hls']||!window['Hls']['isSupported']())return!0x1;hls=new window['Hls']({'enableWorker':!0x0,'lowLatencyMode':!0x0}),hls['attachMedia'](_0x4281ae),await new Promise(_0x5916be=>{hls['on'](window['Hls']['Events']['MEDIA_ATTACHED'],()=>{hls['loadSource'](_0x4c8a66);}),hls['on'](window['Hls']['Events']['MANIFEST_PARSED'],async()=>{await awaitCanPlay(_0x4281ae),_0x11fb72=await tryPlay(_0x4281ae),_0x5916be();});});}}else{if('dash'===_0x5e4d94['type']){if(!window['dashjs'])return!0x1;dash=window['dashjs']['MediaPlayer']()['create'](),dash['initialize'](_0x4281ae,_0x4c8a66,!0x1),await awaitCanPlay(_0x4281ae),_0x11fb72=await tryPlay(_0x4281ae);}else _0x4281ae['src']=_0x4c8a66,await awaitCanPlay(_0x4281ae),_0x11fb72=await tryPlay(_0x4281ae);}if(!_0x11fb72)return!0x1;if(source['tex']&&source['tex']['dispose'])try{source['tex']['dispose']();}catch(_0x9d0f33){}const _0x2f7984=new a0_0x5014a3['VideoTexture'](_0x4281ae);return _0x2f7984['colorSpace']=a0_0x5014a3['SRGBColorSpace'],_0x2f7984['minFilter']=a0_0x5014a3['LinearFilter'],_0x2f7984['magFilter']=a0_0x5014a3['LinearFilter'],source['type']='video',source['videoEl']=_0x4281ae,setTexture(_0x2f7984),connectVideoElAudio(_0x4281ae),schedulePersist(),!0x0;}catch(_0x30b89a){return console['error']('[Video]\x20setup/texture\x20failed',_0x30b89a),!0x1;}}function nextInPlaylist(){if(!Array['isArray'](playlist)||0x0===playlist['length'])return;if(0x1===playlist['length'])return void loadPlaylistIndex(0x0);let _0x43e74f=currentIndex+0x1;if(_0x43e74f>=playlist['length']){if(!loopChk['checked'])return void loadPlaylistIndex(currentIndex);_0x43e74f=0x0;}loadPlaylistIndex(_0x43e74f);}function prevInPlaylist(){if(!Array['isArray'](playlist)||0x0===playlist['length'])return;if(0x1===playlist['length'])return void loadPlaylistIndex(0x0);let _0x31e869=currentIndex-0x1;if(_0x31e869<0x0){if(!loopChk['checked'])return void loadPlaylistIndex(currentIndex);_0x31e869=playlist['length']-0x1;}loadPlaylistIndex(_0x31e869);}loadPlaylistFromTreeFile(TREE_FILE_PATH,BASE_MEDIA_PATH)['then'](async _0x19d4bb=>{_0x19d4bb||(console['warn']('[Playlist]\x20falling\x20back\x20to\x20demo\x20entry'),playlist['push']({'type':'hls','label':'HLS\x20test','url':'media/test/KuzniakTeicherHope/master.m3u8'}),refreshPlaylistSelect()),await restoreFromStorageOrPreset();}),webcamBtn['addEventListener']('click',async()=>{if(await beginFrom('webcam'),'webcam'!==source['type']){autoAdvance=!0x1;try{await ensureAudioCtx(),destroyABR(),disconnectAudio(),clearVideoFile(),clearImage(),clearAudio(),stopWebcam();const _0x18f07e=await navigator['mediaDevices']['getUserMedia']({'video':{'facingMode':'user'},'audio':!0x0}),_0x2446e1=getOrCreateVideo();_0x2446e1['muted']=!0x0,_0x2446e1['srcObject']=_0x18f07e,await awaitCanPlay(_0x2446e1),await tryPlay(_0x2446e1);const _0x56e9cb=new a0_0x5014a3['VideoTexture'](_0x2446e1);_0x56e9cb['colorSpace']=a0_0x5014a3['SRGBColorSpace'],source['type']='webcam',source['stream']=_0x18f07e,setTexture(_0x56e9cb),connectStreamAudio(_0x18f07e),webcamBtn['textContent']='Webcam:\x20ON';}catch(_0x5409cd){console['error']('[Webcam]\x20blocked/error',_0x5409cd),webcamBtn['textContent']='Webcam\x20blocked';}}else clearSource();}),imgInput['addEventListener']('change',async _0x43b94f=>{await beginFrom('image');const _0x30fb91=_0x43b94f['target']['files']?.[0x0];if(!_0x30fb91)return;autoAdvance=!0x1,destroyABR(),stopWebcam(),disconnectAudio(),clearAudio(),clearVideoFile(),clearImage();const _0x360a6e=URL['createObjectURL'](_0x30fb91),_0x33db24=new Image();_0x33db24['crossOrigin']='anonymous',_0x33db24['onload']=()=>{const _0x315fa8=new a0_0x5014a3['Texture'](_0x33db24);_0x315fa8['needsUpdate']=!0x0,_0x315fa8['colorSpace']=a0_0x5014a3['SRGBColorSpace'],source['type']='image',source['imageEl']=_0x33db24,setTexture(_0x315fa8);},_0x33db24['onerror']=_0x134c1d=>{console['error']('[Image]\x20load\x20error',_0x134c1d);},_0x33db24['src']=_0x360a6e;}),vidInput['addEventListener'],audioInput['addEventListener']('change',async _0xb38ff7=>{const _0x497384=_0xb38ff7['target']['files']?.[0x0];if(!_0x497384)return;if(autoAdvance=!0x1,await ensureAudioCtx(),'suspended'===audioCtx['state'])try{await audioCtx['resume']();}catch(_0x263321){}destroyABR(),stopWebcam(),clearVideoFile(),clearImage(),clearAudio(),disconnectAudio(),setTexture(null);const _0x579197=URL['createObjectURL'](_0x497384),_0x30d575=new Audio();_0x30d575['crossOrigin']='anonymous',_0x30d575['autoplay']=!0x0,_0x30d575['loop']=!0x1,_0x30d575['src']=_0x579197;if(!await tryPlay(_0x30d575))return void console['error']('[Audio]\x20play\x20failed');connectAudioEl(_0x30d575);const _0x198796=buildSpectrumTexture(0x100,0x100);source['type']='audio',source['audioEl']=_0x30d575,setTexture(_0x198796);}),clearBtn['addEventListener']('click',()=>{clearSource();}),startBtn['addEventListener']('click',async()=>{if(await beginFrom('start'),await ensureAudioCtx(),audioCtx&&'suspended'===audioCtx['state'])try{await audioCtx['resume']();}catch(_0x3fef62){}autoAdvance=!0x0,playlist['length']&&loadPlaylistIndex(currentIndex);}),prevBtn['addEventListener']('click',async()=>{await beginFrom('prev'),prevInPlaylist();}),nextBtn['addEventListener']('click',async()=>{await beginFrom('next'),nextInPlaylist();}),playlistSelect['addEventListener']('change',async()=>{await beginFrom('playlist'),loadPlaylistIndex(parseInt(playlistSelect['value'],0xa));});const shared={'uTime':{'value':0x0},'uLightDir':{'value':new a0_0x5014a3['Vector3'](0.5,0.9,0.3)['normalize']()},'uSaturation':{'value':0x1}},satGLSL='vec3\x20sat(vec3\x20c,\x20float\x20s){\x20float\x20l\x20=\x20dot(c,\x20vec3(0.2126,0.7152,0.0722));\x20return\x20mix(vec3(l),\x20c,\x20s);\x20}',rainbowGLSL='\x0a\x20\x20const\x20float\x20PI\x20=\x203.141592653589793;\x0a\x20\x20vec3\x20h2rgb(float\x20h){\x0a\x20\x20\x20\x20vec3\x20k\x20=\x20vec3(0.0,\x204.0,\x202.0);\x0a\x20\x20\x20\x20return\x20clamp(abs(mod(h*6.0\x20+\x20k,\x206.0)\x20-\x203.0)\x20-\x201.0,\x200.0,\x201.0);\x0a\x20\x20}\x0a\x20\x20vec3\x20rainbowByAngle(float\x20ang,\x20float\x20rot){\x0a\x20\x20\x20\x20float\x20h\x20=\x20fract((ang\x20+\x20rot)\x20/\x20(2.0*PI));\x0a\x20\x20\x20\x20return\x20h2rgb(h);\x0a\x20\x20}\x0a',sphereVert='\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTime,uAmp,uFreq,uTexStrength;\x20uniform\x20sampler2D\x20uTex;\x20uniform\x20int\x20uUseTex;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vNormalW;\x20varying\x20vec3\x20vPosW;\x20varying\x20vec2\x20vUvV;\x0a\x20\x20\x20\x20\x20\x20'+simplexGLSL+'\x0a\x20\x20\x20\x20\x20\x20float\x20luma(vec3\x20c){\x20return\x20dot(c,\x20vec3(0.2126,0.7152,0.0722));\x20}\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20pos\x20=\x20position;\x20vUvV\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20camDisp\x20=\x200.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(uUseTex==1){\x20vec2\x20suv\x20=\x20vec2(1.0\x20-\x20vUvV.x,\x20vUvV.y);\x20vec3\x20texel\x20=\x20texture2D(uTex,\x20suv).rgb;\x20camDisp\x20=\x20(0.5\x20-\x20luma(texel))\x20*\x20uTexStrength;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20n\x20=\x20snoise(normal*uFreq\x20+\x20vec3(0.0,0.0,uTime*0.25));\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20disp\x20=\x20n*(uAmp*0.35)\x20+\x20camDisp*(uAmp*1.35);\x0a\x20\x20\x20\x20\x20\x20\x20\x20disp\x20=\x20clamp(disp,\x20-uAmp*1.35,\x20uAmp*1.35);\x0a\x20\x20\x20\x20\x20\x20\x20\x20pos\x20+=\x20normal\x20*\x20disp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20worldPos\x20=\x20modelMatrix\x20*\x20vec4(pos,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vPosW\x20=\x20worldPos.xyz;\x20vNormalW\x20=\x20normalize(mat3(modelMatrix)*normal);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20viewMatrix\x20*\x20worldPos;\x0a\x20\x20\x20\x20\x20\x20}\x0a',sphereFrag='\x0a\x20\x20\x20\x20\x20\x20precision\x20highp\x20float;\x0a\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20uColor,uLightDir;\x20uniform\x20sampler2D\x20uTex;\x20uniform\x20int\x20uUseTex;\x20uniform\x20float\x20uSaturation;\x0a\x20\x20\x20\x20\x20\x20uniform\x20int\x20uRainbowOn;\x20uniform\x20float\x20uRainbowRot;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vNormalW;\x20varying\x20vec3\x20vPosW;\x20varying\x20vec2\x20vUvV;\x0a\x20\x20\x20\x20\x20\x20'+satGLSL+'\x0a\x20\x20\x20\x20\x20\x20'+rainbowGLSL+'\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20baseCol\x20=\x20uColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(uUseTex==1){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20suv=vec2(1.0\x20-\x20vUvV.x,\x20vUvV.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20texture2D(uTex,\x20suv).rgb;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}else\x20if(uRainbowOn==1){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20ang\x20=\x20atan(vNormalW.z,\x20vNormalW.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20rainbowByAngle(ang,\x20uRainbowRot);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20sat(baseCol,\x20uSaturation);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20N=normalize(vNormalW),\x20L=normalize(uLightDir);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20lambert\x20=\x20max(dot(N,L),0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20col\x20=\x20baseCol*(0.18\x20+\x200.82*lambert);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20fres\x20=\x20pow(1.0\x20-\x20max(dot(N,\x20normalize(-vPosW)),\x200.0),\x203.0)*0.22;\x0a\x20\x20\x20\x20\x20\x20\x20\x20col\x20+=\x20fres*vec3(1.0,0.7,0.9);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(col,\x201.0);\x0a\x20\x20\x20\x20\x20\x20}\x0a',sphereMat=new a0_0x5014a3['ShaderMaterial']({'uniforms':{...shared,'uColor':{'value':new a0_0x5014a3['Color'](0xff4fbf)},'uAmp':{'value':0.22},'uFreq':{'value':1.2},'uTex':{'value':null},'uUseTex':{'value':0x0},'uTexStrength':{'value':0x1},'uRainbowOn':{'value':0x0},'uRainbowRot':{'value':0x0}},'vertexShader':sphereVert,'fragmentShader':sphereFrag,'wireframe':!0x1}),sphereGeo=new a0_0x5014a3['SphereGeometry'](0x1,0xa0,0xa0),sphere=new a0_0x5014a3['Mesh'](sphereGeo,sphereMat);sphere['position']['y']=1.15,scene['add'](sphere);const reflectVert='\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTime,uAmp,uFreq,uWobbleAmp,uWobbleFreq,uTexStrength;\x20uniform\x20sampler2D\x20uTex;\x20uniform\x20int\x20uUseTex;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vPosW;\x20varying\x20vec3\x20vNormalW;\x20varying\x20vec2\x20vUvV;\x0a\x20\x20\x20\x20\x20\x20'+simplexGLSL+'\x0a\x20\x20\x20\x20\x20\x20float\x20luma(vec3\x20c){\x20return\x20dot(c,\x20vec3(0.2126,0.7152,0.0722));\x20}\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20pos\x20=\x20position;\x20vUvV\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20camDisp\x20=\x200.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(uUseTex==1){\x20vec2\x20suv\x20=\x20vec2(1.0\x20-\x20vUvV.x,\x20vUvV.y);\x20vec3\x20texel\x20=\x20texture2D(uTex,\x20suv).rgb;\x20camDisp\x20=\x20(0.5\x20-\x20luma(texel))\x20*\x20uTexStrength;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20n\x20=\x20snoise(normal*uFreq\x20+\x20vec3(0.0,0.0,uTime*0.25));\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20disp\x20=\x20n*(uAmp*0.30)\x20+\x20camDisp*(uAmp*1.10);\x0a\x20\x20\x20\x20\x20\x20\x20\x20disp\x20=\x20clamp(disp,\x20-uAmp*1.10,\x20uAmp*1.10);\x0a\x20\x20\x20\x20\x20\x20\x20\x20pos\x20+=\x20normal*disp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20wp\x20=\x20modelMatrix\x20*\x20vec4(pos,1.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20wob\x20=\x20snoise(vec3(wp.xz*uWobbleFreq,\x20uTime*0.3));\x0a\x20\x20\x20\x20\x20\x20\x20\x20wp.x\x20+=\x20wob*uWobbleAmp;\x20wp.z\x20+=\x20wob*uWobbleAmp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vPosW=wp.xyz;\x20vNormalW=normalize(mat3(modelMatrix)*normal);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20viewMatrix\x20*\x20wp;\x0a\x20\x20\x20\x20\x20\x20}\x0a',reflectFrag='\x0a\x20\x20\x20\x20\x20\x20precision\x20highp\x20float;\x0a\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20uColor,uLightDir;\x20uniform\x20float\x20uAlpha,uR,uSoft,uSaturation;\x20uniform\x20sampler2D\x20uTex;\x20uniform\x20int\x20uUseTex;\x0a\x20\x20\x20\x20\x20\x20uniform\x20int\x20uRainbowOn;\x20uniform\x20float\x20uRainbowRot;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vPosW;\x20varying\x20vec3\x20vNormalW;\x20varying\x20vec2\x20vUvV;\x0a\x20\x20\x20\x20\x20\x20'+satGLSL+'\x0a\x20\x20\x20\x20\x20\x20'+rainbowGLSL+'\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20baseCol=uColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(uUseTex==1){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20suv=vec2(1.0\x20-\x20vUvV.x,\x20vUvV.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20texture2D(uTex,\x20suv).rgb;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}else\x20if(uRainbowOn==1){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20ang\x20=\x20atan(vPosW.z,\x20vPosW.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20rainbowByAngle(ang,\x20uRainbowRot);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20sat(baseCol,\x20uSaturation);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20N=normalize(vNormalW),\x20L=normalize(uLightDir);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20lambert=max(dot(N,L),0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20col\x20=\x20baseCol*(0.10+0.90*lambert);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20r=length(vPosW.xz),\x20fall=1.0\x20-\x20smoothstep(uR,\x20uR+uSoft,\x20r);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(col*0.85,\x20uAlpha*fall);\x0a\x20\x20\x20\x20\x20\x20}\x0a';function makeReflectMat(){return new a0_0x5014a3['ShaderMaterial']({'uniforms':{...shared,'uColor':{'value':new a0_0x5014a3['Color'](0xff4fbf)},'uAmp':{'value':0.22},'uFreq':{'value':1.2},'uWobbleAmp':{'value':0.015},'uWobbleFreq':{'value':1.6},'uAlpha':{'value':0.55},'uR':{'value':1.6},'uSoft':{'value':0x1},'uTex':{'value':null},'uUseTex':{'value':0x0},'uTexStrength':{'value':0x1},'uRainbowOn':{'value':0x0},'uRainbowRot':{'value':0x0}},'vertexShader':reflectVert,'fragmentShader':reflectFrag,'transparent':!0x0,'depthWrite':!0x0,'blending':a0_0x5014a3['NormalBlending']});}const reflectMatBottom=makeReflectMat(),reflectMatTop=makeReflectMat(),mirrorBottom=new a0_0x5014a3['Mesh'](new a0_0x5014a3['SphereGeometry'](0x1,0xa0,0xa0),reflectMatBottom);mirrorBottom['position']['y']=-1.15,mirrorBottom['scale']['y']=-0x1,scene['add'](mirrorBottom);const mirrorTop=new a0_0x5014a3['Mesh'](new a0_0x5014a3['SphereGeometry'](0x1,0xa0,0xa0),reflectMatTop);mirrorTop['position']['y']=3.45,mirrorTop['scale']['y']=0x1,scene['add'](mirrorTop);const pointsVert='\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTime,uAmp,uFreq,uTexStrength,uPointSize;\x20uniform\x20sampler2D\x20uTex;\x20uniform\x20int\x20uUseTex;\x0a\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20uLightDir;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vNormalW;\x20varying\x20vec3\x20vPosW;\x20varying\x20vec2\x20vUvV;\x0a\x20\x20\x20\x20\x20\x20'+simplexGLSL+'\x0a\x20\x20\x20\x20\x20\x20float\x20luma(vec3\x20c){\x20return\x20dot(c,\x20vec3(0.2126,0.7152,0.0722));\x20}\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20pos\x20=\x20position;\x20vUvV\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20camDisp\x20=\x200.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(uUseTex==1){\x20vec2\x20suv\x20=\x20vec2(1.0\x20-\x20vUvV.x,\x20vUvV.y);\x20vec3\x20texel\x20=\x20texture2D(uTex,\x20suv).rgb;\x20camDisp\x20=\x20(0.5\x20-\x20luma(texel))\x20*\x20uTexStrength;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20n\x20=\x20snoise(normal*uFreq\x20+\x20vec3(0.0,0.0,uTime*0.25));\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20disp\x20=\x20n*(uAmp*0.35)\x20+\x20camDisp*(uAmp*1.35);\x0a\x20\x20\x20\x20\x20\x20\x20\x20disp\x20=\x20clamp(disp,\x20-uAmp*1.35,\x20uAmp*1.35);\x0a\x20\x20\x20\x20\x20\x20\x20\x20pos\x20+=\x20normal\x20*\x20disp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20worldPos\x20=\x20modelMatrix\x20*\x20vec4(pos,1.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vPosW\x20=\x20worldPos.xyz;\x20vNormalW\x20=\x20normalize(mat3(modelMatrix)*normal);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20mv\x20=\x20viewMatrix\x20*\x20worldPos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_PointSize\x20=\x20uPointSize\x20*\x20(300.0\x20/\x20-mv.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20mv;\x0a\x20\x20\x20\x20\x20\x20}\x0a',pointsFrag='\x0a\x20\x20\x20\x20\x20\x20precision\x20highp\x20float;\x0a\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20uTex;\x20uniform\x20int\x20uUseTex;\x20uniform\x20float\x20uSaturation;\x20uniform\x20vec3\x20uColor;\x20uniform\x20vec3\x20uLightDir;\x0a\x20\x20\x20\x20\x20\x20uniform\x20int\x20uRainbowOn;\x20uniform\x20float\x20uRainbowRot;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vNormalW;\x20varying\x20vec3\x20vPosW;\x20varying\x20vec2\x20vUvV;\x0a\x20\x20\x20\x20\x20\x20'+satGLSL+'\x0a\x20\x20\x20\x20\x20\x20'+rainbowGLSL+'\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20d\x20=\x20gl_PointCoord*2.0\x20-\x201.0;\x20float\x20r\x20=\x20dot(d,d);\x20if(r>1.0)\x20discard;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20baseCol\x20=\x20uColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if(uUseTex==1){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20suv=vec2(1.0\x20-\x20vUvV.x,\x20vUvV.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20texture2D(uTex,\x20suv).rgb;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}else\x20if(uRainbowOn==1){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20ang\x20=\x20atan(vNormalW.z,\x20vNormalW.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20rainbowByAngle(ang,\x20uRainbowRot);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20baseCol\x20=\x20sat(baseCol,\x20uSaturation);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20N=normalize(vNormalW),\x20L=normalize(uLightDir);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20lambert=max(dot(N,L),0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20col\x20=\x20baseCol*(0.18\x20+\x200.82*lambert);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(col,1.0);\x0a\x20\x20\x20\x20\x20\x20}\x0a',spherePointsMat=new a0_0x5014a3['ShaderMaterial']({'uniforms':{...shared,'uColor':{'value':new a0_0x5014a3['Color'](0xff4fbf)},'uAmp':{'value':0.22},'uFreq':{'value':1.2},'uTex':{'value':null},'uUseTex':{'value':0x0},'uTexStrength':{'value':0x1},'uPointSize':{'value':2.2},'uRainbowOn':{'value':0x0},'uRainbowRot':{'value':0x0}},'vertexShader':pointsVert,'fragmentShader':pointsFrag,'transparent':!0x0,'depthWrite':!0x1}),spherePoints=new a0_0x5014a3['Points'](new a0_0x5014a3['SphereGeometry'](0x1,0xa0,0xa0),spherePointsMat);spherePoints['position']['y']=1.15,spherePoints['visible']=!0x1,scene['add'](spherePoints);const BIN_COUNT=0x80,specGeo=new a0_0x5014a3['BufferGeometry'](),specPos=new Float32Array(0x180),specCol=new Float32Array(0x180);for(let e=0x0;e<0x80;e++){const t=e/0x80*Math['PI']*0x2;specPos[0x3*e+0x0]=0x2*Math['cos'](t),specPos[0x3*e+0x1]=1.15,specPos[0x3*e+0x2]=0x2*Math['sin'](t),specCol[0x3*e+0x0]=0x1,specCol[0x3*e+0x1]=0x1,specCol[0x3*e+0x2]=0x1;}specGeo['setAttribute']('position',new a0_0x5014a3['BufferAttribute'](specPos,0x3)),specGeo['setAttribute']('aColor',new a0_0x5014a3['BufferAttribute'](specCol,0x3));const specMat=new a0_0x5014a3['ShaderMaterial']({'uniforms':{'uSize':{'value':0xa},'uShape':{'value':0x0}},'vertexShader':'uniform\x20float\x20uSize;\x20attribute\x20vec3\x20aColor;\x20varying\x20vec3\x20vColor;\x20void\x20main(){\x20vColor=aColor;\x20vec4\x20mv=modelViewMatrix*vec4(position,1.0);\x20gl_PointSize=uSize*(300.0/-mv.z);\x20gl_Position=projectionMatrix*mv;\x20}','fragmentShader':'precision\x20highp\x20float;\x20varying\x20vec3\x20vColor;\x20uniform\x20int\x20uShape;\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20sdEquilateralTri(vec2\x20p){\x20const\x20float\x20k=1.7320508075688772;\x20p.x=abs(p.x)-0.5;\x20p.y=p.y+0.28867513459481287;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(p.x+k*p.y>0.0)\x20p=vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\x20p.x-=clamp(p.x,-1.0,0.0);\x20return\x20-length(p)*sign(p.y);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20sdCross(vec2\x20p){\x20p=abs(p);\x20float\x20w=0.3;\x20float\x20d1=max(p.x-w,p.y-1.0);\x20float\x20d2=max(p.y-w,p.x-1.0);\x20return\x20min(d1,d2);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20uv=gl_PointCoord*2.0-1.0;\x20float\x20a=0.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(uShape==0){\x20float\x20r=dot(uv,uv);\x20if(r>1.0)\x20discard;\x20a=smoothstep(1.0,0.7,r);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if(uShape==1){\x20float\x20m=max(abs(uv.x),abs(uv.y));\x20if(m>1.0)\x20discard;\x20a=smoothstep(1.0,0.7,m);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if(uShape==2){\x20float\x20d=sdEquilateralTri(uv);\x20if(d>0.0)\x20discard;\x20a=smoothstep(0.0,-0.3,d);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20{\x20float\x20d=sdCross(uv);\x20if(d>0.0)\x20discard;\x20a=smoothstep(0.0,-0.3,d);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor=vec4(vColor,a);\x0a}','transparent':!0x0,'depthWrite':!0x1}),spectrumPoints=new a0_0x5014a3['Points'](specGeo,specMat);spectrumPoints['visible']=!0x1,scene['add'](spectrumPoints);const specGeoLine=new a0_0x5014a3['BufferGeometry'](),specPosLine=new Float32Array(0x180),specColLine=new Float32Array(0x180);specGeoLine['setAttribute']('position',new a0_0x5014a3['BufferAttribute'](specPosLine,0x3)),specGeoLine['setAttribute']('color',new a0_0x5014a3['BufferAttribute'](specColLine,0x3));const specLineMat=new a0_0x5014a3['LineBasicMaterial']({'linewidth':0x1,'vertexColors':!0x0,'transparent':!0x0,'opacity':0x1}),spectrumLine=new a0_0x5014a3['LineLoop'](specGeoLine,specLineMat);function hslToRgb(_0x28e60d,_0x2ac300,_0x3ed78b){_0x28e60d=(_0x28e60d%0x1+0x1)%0x1;const _0x2c5af8=_0x2ac300*Math['min'](_0x3ed78b,0x1-_0x3ed78b),_0x373462=_0x5267a7=>{const _0x2084c3=_0x5267a7+0xc*_0x28e60d,_0x469689=_0x2084c3-0xc*Math['floor'](_0x2084c3/0xc);return _0x3ed78b-_0x2c5af8*Math['max'](-0x1,Math['min'](_0x469689-0x3,0x9-_0x469689,0x1));};return[_0x373462(0x0),_0x373462(0x8),_0x373462(0x4)];}spectrumLine['visible']=!0x1,scene['add'](spectrumLine);const particlesParent=new a0_0x5014a3['Group']();scene['add'](particlesParent);let pointsField=null,pGeo=null,pMat=null,P_COUNT=0x258,vel=null,lockedId=-0x1,hoveredId=-0x1;const mousePx={'x':-0x1,'y':-0x1},readBuf=new Uint8Array(0x4);let pickScene=null,pickPoints=null,pickMat=null,pickTarget=null;const __ndc=new a0_0x5014a3['Vector2'](),__raycaster=new a0_0x5014a3['Raycaster'](),__planeY=new a0_0x5014a3['Plane'](),__hitY=new a0_0x5014a3['Vector3']();function pointerWorldAtY(_0x5c5e89,_0x36acd0,_0x5bd8f6){const _0x26cbf8=renderer['domElement']['getBoundingClientRect']();return __ndc['x']=(_0x5c5e89-_0x26cbf8['left'])/_0x26cbf8['width']*0x2-0x1,__ndc['y']=-(_0x36acd0-_0x26cbf8['top'])/_0x26cbf8['height']*0x2+0x1,__raycaster['setFromCamera'](__ndc,camera),__planeY['set'](new a0_0x5014a3['Vector3'](0x0,0x1,0x0),-_0x5bd8f6),__raycaster['ray']['intersectPlane'](__planeY,__hitY),__hitY;}function buildPickTarget(){pickTarget&&pickTarget['dispose']();const _0x2151e1=renderer['domElement']['width'],_0x23182a=renderer['domElement']['height'];pickTarget=new a0_0x5014a3['WebGLRenderTarget'](_0x2151e1,_0x23182a,{'depthBuffer':!0x1,'stencilBuffer':!0x1});}function pickParticleUnderMouse(){if(!pickScene||!pointsField||!pickTarget)return;if(mousePx['x']<0x0||mousePx['y']<0x0)return;const _0x512851=renderer['domElement'],_0x3d0c2f=Math['max'](0x0,Math['min'](_0x512851['width']-0x1,mousePx['x'])),_0x300132=Math['max'](0x0,Math['min'](_0x512851['height']-0x1,_0x512851['height']-0x1-mousePx['y'])),_0x5abad1=renderer['getRenderTarget']();renderer['setRenderTarget'](pickTarget),renderer['clear'](),renderer['render'](pickScene,camera),renderer['readRenderTargetPixels'](pickTarget,_0x3d0c2f,_0x300132,0x1,0x1,readBuf),renderer['setRenderTarget'](_0x5abad1);const _0x35c3dd=readBuf[0x0]<<0x10|readBuf[0x1]<<0x8|readBuf[0x2],_0x3e4e92=_0x35c3dd>=0x0&&_0x35c3dd<P_COUNT?_0x35c3dd:-0x1;_0x3e4e92!==hoveredId&&(hoveredId=_0x3e4e92,-0x1!==hoveredId&&console['log']('[particle:hover]',hoveredId));}function particlesOnResize(){buildPickTarget();}let lockUntil=0x0;renderer['domElement']['addEventListener']('mousemove',_0x5e8ac1=>{const _0xae876d=renderer['domElement']['getBoundingClientRect']();mousePx['x']=Math['floor']((_0x5e8ac1['clientX']-_0xae876d['left'])*(renderer['domElement']['width']/_0xae876d['width'])),mousePx['y']=Math['floor']((_0x5e8ac1['clientY']-_0xae876d['top'])*(renderer['domElement']['height']/_0xae876d['height'])),mousePx['clientX']=_0x5e8ac1['clientX'],mousePx['clientY']=_0x5e8ac1['clientY'];}),renderer['domElement']['addEventListener']('mouseleave',()=>{mousePx['x']=mousePx['y']=-0x1;}),renderer['domElement']['addEventListener']('mouseleave',()=>{mousePx['x']=mousePx['y']=-0x1,mousePx['clientX']=mousePx['clientY']=void 0x0;},{'passive':!0x0}),renderer['domElement']['addEventListener']('pointerdown',()=>{-0x1===lockedId&&hoveredId>=0x0&&(lockedId=hoveredId,console['log']('[particle:lock]',lockedId));}),renderer['domElement']['addEventListener']('dblclick',()=>{hoveredId===lockedId&&-0x1!==lockedId&&(console['log']('[particle:release]',lockedId),lockedId=-0x1);},{'passive':!0x0});const ATTRACTORS=[];function addAttractor(_0x12e877={}){const _0x82b967={'color':0x4da3ff,'dotSize':0.035,'speed':0.55,'rX':0x2,'rZ':1.3,'yBase':1.15,'yAmp':0.35,'radius':0.9,'strength':0x9,'dampingToward':2.5,'phase':Math['random']()*Math['PI']*0x2};Object['assign'](_0x82b967,_0x12e877);const _0x54e124=new a0_0x5014a3['Group'](),_0x2b2654=new a0_0x5014a3['SphereGeometry'](_0x82b967['dotSize'],0x10,0x10),_0x55d81a=new a0_0x5014a3['MeshBasicMaterial']({'color':_0x82b967['color']}),_0x1fe93e=new a0_0x5014a3['Mesh'](_0x2b2654,_0x55d81a);_0x54e124['add'](_0x1fe93e);const _0x5abedb=new a0_0x5014a3['BufferGeometry'](),_0x2eddd5=new Float32Array(0x6);_0x5abedb['setAttribute']('position',new a0_0x5014a3['BufferAttribute'](_0x2eddd5,0x3));const _0x3fc956=new a0_0x5014a3['LineBasicMaterial']({'color':_0x82b967['color'],'transparent':!0x0,'opacity':0.95}),_0x52cac7=new a0_0x5014a3['Line'](_0x5abedb,_0x3fc956);_0x54e124['add'](_0x52cac7),scene['add'](_0x54e124);const _0x5caa34={'group':_0x54e124,'dot':_0x1fe93e,'line':_0x52cac7,'params':_0x82b967,'t':_0x82b967['phase']};return ATTRACTORS['push'](_0x5caa34),_0x5caa34;}function removeAttractor(_0x3e35a0){const _0x38b116=ATTRACTORS['indexOf'](_0x3e35a0);-0x1!==_0x38b116&&(scene['remove'](_0x3e35a0['group']),_0x3e35a0['dot']['geometry']['dispose'](),_0x3e35a0['dot']['material']['dispose'](),_0x3e35a0['line']['geometry']['dispose'](),_0x3e35a0['line']['material']['dispose'](),ATTRACTORS['splice'](_0x38b116,0x1));}function clearAttractors(){for(;ATTRACTORS['length'];)removeAttractor(ATTRACTORS[0x0]);}function updateAttractors(_0x569158){if(!ATTRACTORS['length'])return;if(!pGeo||!vel)return;const _0x29f2e2=pGeo['getAttribute']('position');for(let _0x131abe=0x0;_0x131abe<ATTRACTORS['length'];_0x131abe++){const _0x4d86b9=ATTRACTORS[_0x131abe],_0xf29ef9=_0x4d86b9['params'];_0x4d86b9['t']+=_0x569158*_0xf29ef9['speed'];const _0x5467e2=Math['cos'](_0x4d86b9['t'])*_0xf29ef9['rX'],_0x354ce8=Math['sin'](0.97*_0x4d86b9['t'])*_0xf29ef9['rZ'],_0x51bc6f=_0xf29ef9['yBase']+Math['sin'](0.63*_0x4d86b9['t'])*_0xf29ef9['yAmp'];_0x4d86b9['dot']['position']['set'](_0x5467e2,_0x51bc6f,_0x354ce8);const _0x1667b8=_0x4d86b9['line']['geometry']['getAttribute']('position');_0x1667b8['setXYZ'](0x0,0x0,0x0,0x0),_0x1667b8['setXYZ'](0x1,_0x5467e2,_0x51bc6f,_0x354ce8),_0x1667b8['needsUpdate']=!0x0;const _0x35fcf2=_0xf29ef9['radius']*_0xf29ef9['radius'],_0x16c690=_0x29f2e2['array'];for(let _0x37a69c=0x0;_0x37a69c<P_COUNT;_0x37a69c++){const _0x926191=0x3*_0x37a69c,_0x4611c2=_0x5467e2-_0x16c690[_0x926191+0x0],_0x12ca12=_0x51bc6f-_0x16c690[_0x926191+0x1],_0x3d474f=_0x354ce8-_0x16c690[_0x926191+0x2],_0x362fc8=_0x4611c2*_0x4611c2+_0x12ca12*_0x12ca12+_0x3d474f*_0x3d474f;if(_0x362fc8>_0x35fcf2)continue;const _0x8484ed=0x1-_0x362fc8/_0x35fcf2,_0x3343ba=_0xf29ef9['strength']*_0x8484ed,_0xb6dbc9=_0xf29ef9['dampingToward'];vel[_0x926191+0x0]+=(_0x4611c2*_0x3343ba-vel[_0x926191+0x0]*_0xb6dbc9)*_0x569158,vel[_0x926191+0x1]+=(_0x12ca12*_0x3343ba-vel[_0x926191+0x1]*_0xb6dbc9)*_0x569158*0.4,vel[_0x926191+0x2]+=(_0x3d474f*_0x3343ba-vel[_0x926191+0x2]*_0xb6dbc9)*_0x569158;}}}let DEFAULT_ATTRACTOR=null;function initDefaultAttractors(){clearAttractors(),DEFAULT_ATTRACTOR=addAttractor({'color':0x4da3ff,'dotSize':0.035,'speed':0.55,'rX':0x2,'rZ':1.3,'yBase':1.15,'yAmp':0.35,'radius':0.9,'strength':0x9,'dampingToward':2.5});}initDefaultAttractors(),addAttractor({'color':0x0,'dotSize':0.5,'speed':0.01,'rX':3.6,'rZ':0x1,'yAmp':0.25,'radius':0x2,'strength':0x14});const AmbientFlow=((()=>{const _0x1a76fc={'emitRate':0xd07,'lifeMin':0x14,'lifeMax':0x6,'recycleRadius2':0.05*0.05,'spawnJitter':0.02,'kickSpeed':0.35,'kickY':0.1,'kickSpread':0x1,'orbit':{'rBase':1.2,'rAmp1':0.4,'rFreq1':0.5,'rAmp2':0.2,'rFreq2':0.93,'angSpeed':0.7,'angOscAmp':0.3,'angOscFreq':0.25,'yBase':1.15,'yAmp':0.35,'yOsc1':0.8,'yOsc2':0.3},'returnGain':0x16,'returnGainY':0.5,'swirlYFactor':0.25,'seed':null},_0x467a95={'mesh':null,'t':0x0,'spawnAcc':0x0,'life':null,'ttl':null,'spawnIdx':0x0,'rng':null};function _0x73664b(){return _0x467a95['rng']?_0x467a95['rng']():Math['random']();}function _0x1fa283(_0x3d460d,_0x22b448){return _0x3d460d+(_0x22b448-_0x3d460d)*_0x73664b();}function _0x294648(_0x41591d=0x1){return(0x2*_0x73664b()-0x1)*_0x41591d;}function _0x32c490(_0x1170bb){_0x1a76fc['seed']=null==_0x1170bb?null:0x0|_0x1170bb,_0x467a95['rng']=null==_0x1a76fc['seed']?null:function(_0x17f20c){let _0x11a09a=_0x17f20c>>>0x0||0x1;return function(){_0x11a09a|=0x0,_0x11a09a=_0x11a09a+0x6d2b79f5|0x0;let _0x541979=Math['imul'](_0x11a09a^_0x11a09a>>>0xf,0x1|_0x11a09a);return _0x541979=_0x541979+Math['imul'](_0x541979^_0x541979>>>0x7,0x3d|_0x541979)^_0x541979,((_0x541979^_0x541979>>>0xe)>>>0x0)/0x100000000;};}(_0x1a76fc['seed']);}function _0x1b5429(_0x1e09fb){const _0x5dd54f=pGeo['getAttribute']('position'),_0x5a7178=pGeo['getAttribute']('seed'),_0x4ae1c3=_0x1a76fc['spawnJitter'],_0x39a5a9=_0x467a95['mesh']['position']['x']+_0x294648(_0x4ae1c3),_0x337b86=_0x467a95['mesh']['position']['y']+_0x294648(_0x4ae1c3),_0x48d122=_0x467a95['mesh']['position']['z']+_0x294648(_0x4ae1c3);_0x5dd54f['array'][0x3*_0x1e09fb+0x0]=_0x39a5a9,_0x5dd54f['array'][0x3*_0x1e09fb+0x1]=_0x337b86,_0x5dd54f['array'][0x3*_0x1e09fb+0x2]=_0x48d122;const _0x548b93=_0x294648(_0x1a76fc['kickSpread']),_0x3a6f12=_0x294648(_0x1a76fc['kickSpread']),_0x27509c=Math['max'](0.0001,Math['hypot'](_0x548b93,_0x3a6f12));vel[0x3*_0x1e09fb+0x0]=_0x548b93/_0x27509c*_0x1a76fc['kickSpeed'],vel[0x3*_0x1e09fb+0x1]=_0x1a76fc['kickY']*_0x294648(0x1),vel[0x3*_0x1e09fb+0x2]=_0x3a6f12/_0x27509c*_0x1a76fc['kickSpeed'];const _0x27a0f3=Math['hypot'](_0x39a5a9,_0x48d122),_0x4cab86=Math['atan2'](_0x48d122,_0x39a5a9);_0x5a7178['setX'](_0x1e09fb,Math['max'](0.8,_0x27a0f3)),_0x5a7178['setY'](_0x1e09fb,0.2+0.25*_0x73664b()),_0x5a7178['setZ'](_0x1e09fb,_0x4cab86),_0x467a95['ttl'][_0x1e09fb]=_0x1fa283(_0x1a76fc['lifeMin'],_0x1a76fc['lifeMax']),_0x467a95['life'][_0x1e09fb]=_0x467a95['ttl'][_0x1e09fb];}return{'configure':function(_0x26b17c={}){Object['assign'](_0x1a76fc,_0x26b17c),_0x26b17c['orbit']&&Object['assign'](_0x1a76fc['orbit'],_0x26b17c['orbit']);},'setSeed':_0x32c490,'createEmitter':function(){if(!_0x467a95['mesh']){_0x467a95['mesh']=new a0_0x5014a3['Mesh'](new a0_0x5014a3['SphereGeometry'](0.02,0xc,0xc),new a0_0x5014a3['MeshBasicMaterial']({'color':0xff3030})),_0x467a95['mesh']['position']['set'](0x0*_0x1a76fc['orbit']['yBase'],_0x1a76fc['orbit']['yBase'],0x0),particlesParent['add'](_0x467a95['mesh']),_0x467a95['life']=new Float32Array(P_COUNT),_0x467a95['ttl']=new Float32Array(P_COUNT);for(let _0x4b87c3=0x0;_0x4b87c3<P_COUNT;_0x4b87c3++)_0x467a95['ttl'][_0x4b87c3]=_0x1fa283(_0x1a76fc['lifeMin'],_0x1a76fc['lifeMax']),_0x467a95['life'][_0x4b87c3]=_0x1fa283(0x0,_0x467a95['ttl'][_0x4b87c3]);_0x32c490(_0x1a76fc['seed']),console['log']('[AmbientFlow]\x20emitter\x20initialized',{'seed':_0x1a76fc['seed']});}},'updateEmitter':function(_0xde84d){_0x467a95['t']+=_0xde84d;const _0x15478e=_0x1a76fc['orbit'],_0x40a5d6=_0x15478e['rBase']+_0x15478e['rAmp1']*Math['sin'](_0x467a95['t']*_0x15478e['rFreq1'])+_0x15478e['rAmp2']*Math['sin'](_0x467a95['t']*_0x15478e['rFreq2']),_0x1db549=_0x467a95['t']*_0x15478e['angSpeed']+_0x15478e['angOscAmp']*Math['sin'](_0x467a95['t']*_0x15478e['angOscFreq']),_0x4e098c=_0x15478e['yBase']+_0x15478e['yAmp']*Math['sin'](_0x467a95['t']*_0x15478e['yOsc1'])*Math['cos'](_0x467a95['t']*_0x15478e['yOsc2']);_0x467a95['mesh']['position']['set'](Math['cos'](_0x1db549)*_0x40a5d6,_0x4e098c,Math['sin'](_0x1db549)*_0x40a5d6);},'respawnParticle':_0x1b5429,'spawnLoop':function(_0x45bc89){_0x467a95['spawnAcc']+=_0x45bc89*_0x1a76fc['emitRate'];let _0x16b4dc=0x0;for(;_0x467a95['spawnAcc']>=0x1&&_0x16b4dc++<P_COUNT;){let _0x6ca9d4=_0x467a95['spawnIdx']++%P_COUNT,_0xaded5d=0x0;for(;_0x467a95['life'][_0x6ca9d4]>0x0&&_0xaded5d++<Math['min'](P_COUNT,0x40);)_0x6ca9d4=_0x467a95['spawnIdx']++%P_COUNT;_0x467a95['life'][_0x6ca9d4]<=0x0&&_0x1b5429(_0x6ca9d4),_0x467a95['spawnAcc']-=0x1;}},'state':_0x467a95,'config':_0x1a76fc};})());function buildParticles(_0x3777af){pointsField&&(particlesParent['remove'](pointsField),pGeo?.['dispose'](),pMat?.['dispose']()),P_COUNT=Math['max'](0x0|_0x3777af,Array['isArray'](playlist)?playlist['length']:0x0),pGeo=new a0_0x5014a3['BufferGeometry']();const _0x5ad4b9=new Float32Array(0x3*P_COUNT),_0x42af52=new Float32Array(0x3*P_COUNT),_0x170de7=new Float32Array(P_COUNT),_0x5afce3=new Float32Array(P_COUNT),_0xb9679=new Float32Array(0x3*P_COUNT),_0x64f6ef=new Float32Array(0x3*P_COUNT);vel=new Float32Array(0x3*P_COUNT);for(let _0x53b606=0x0;_0x53b606<P_COUNT;_0x53b606++){const _0x2647d9=1.8+1.2*Math['random'](),_0x1752d7=Math['random']()*Math['PI']*0x2,_0x2b9b4c=0.6*Math['random']()-0.3+1.15;if(_0x5ad4b9[0x3*_0x53b606+0x0]=Math['cos'](_0x1752d7)*_0x2647d9,_0x5ad4b9[0x3*_0x53b606+0x1]=_0x2b9b4c,_0x5ad4b9[0x3*_0x53b606+0x2]=Math['sin'](_0x1752d7)*_0x2647d9,_0x42af52[0x3*_0x53b606+0x0]=_0x2647d9,_0x42af52[0x3*_0x53b606+0x1]=0.2+0.25*Math['random'](),_0x42af52[0x3*_0x53b606+0x2]=_0x1752d7,vel[0x3*_0x53b606+0x0]=vel[0x3*_0x53b606+0x1]=vel[0x3*_0x53b606+0x2]=0x0,_0x170de7[_0x53b606]=0.01,_0x5afce3[_0x53b606]=0xa,_0x53b606<(playlist?.['length']||0x0)){const _0x16fc0b=_0x53b606/Math['max'](0x1,playlist['length']),_0x1aa09d=new a0_0x5014a3['Color']()['setHSL'](_0x16fc0b,0.9,0.6);_0x64f6ef[0x3*_0x53b606+0x0]=_0x1aa09d['r'],_0x64f6ef[0x3*_0x53b606+0x1]=_0x1aa09d['g'],_0x64f6ef[0x3*_0x53b606+0x2]=_0x1aa09d['b'];}else _0x64f6ef[0x3*_0x53b606+0x0]=0x1,_0x64f6ef[0x3*_0x53b606+0x1]=0x1,_0x64f6ef[0x3*_0x53b606+0x2]=0x1;_0xb9679[0x3*_0x53b606+0x0]=_0x64f6ef[0x3*_0x53b606+0x0],_0xb9679[0x3*_0x53b606+0x1]=_0x64f6ef[0x3*_0x53b606+0x1],_0xb9679[0x3*_0x53b606+0x2]=_0x64f6ef[0x3*_0x53b606+0x2];}pGeo['setAttribute']('position',new a0_0x5014a3['BufferAttribute'](_0x5ad4b9,0x3)),pGeo['setAttribute']('seed',new a0_0x5014a3['BufferAttribute'](_0x42af52,0x3)),pGeo['setAttribute']('aSize',new a0_0x5014a3['BufferAttribute'](_0x170de7,0x1)),pGeo['setAttribute']('aBoost',new a0_0x5014a3['BufferAttribute'](_0x5afce3,0x1)),pGeo['setAttribute']('aTint',new a0_0x5014a3['BufferAttribute'](_0xb9679,0x3)),pGeo['setAttribute']('aBaseTint',new a0_0x5014a3['BufferAttribute'](_0x64f6ef,0x3)),(pMat=new a0_0x5014a3['ShaderMaterial']({'uniforms':{'uPointSizePx':{'value':0x0}},'vertexShader':'\x0a\x20\x20\x20\x20uniform\x20float\x20uPointSizePx;\x0a\x20\x20\x20\x20attribute\x20float\x20aSize;\x0a\x20\x20\x20\x20attribute\x20float\x20aBoost;\x0a\x20\x20\x20\x20attribute\x20vec3\x20\x20aTint;\x0a\x20\x20\x20\x20varying\x20vec3\x20\x20vTint;\x0a\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20vTint\x20=\x20aTint;\x0a\x20\x20\x20\x20\x20\x20vec4\x20mv\x20=\x20modelViewMatrix\x20*\x20vec4(position,\x201.0);\x0a\x20\x20\x20\x20\x20\x20gl_PointSize\x20=\x20(aSize\x20*\x20aBoost)\x20*\x20(300.0\x20/\x20-mv.z)\x20+\x20uPointSizePx;\x0a\x20\x20\x20\x20\x20\x20gl_Position\x20\x20=\x20projectionMatrix\x20*\x20mv;\x0a\x20\x20\x20\x20}\x0a\x20\x20','fragmentShader':'\x0a\x20\x20\x20\x20precision\x20highp\x20float;\x0a\x20\x20\x20\x20varying\x20vec3\x20\x20vTint;\x0a\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20vec2\x20d\x20=\x20gl_PointCoord\x20*\x202.0\x20-\x201.0;\x0a\x20\x20\x20\x20\x20\x20float\x20r2\x20=\x20dot(d,d);\x0a\x20\x20\x20\x20\x20\x20if\x20(r2\x20>\x201.0)\x20discard;\x0a\x20\x20\x20\x20\x20\x20float\x20a\x20=\x20smoothstep(1.0,\x200.7,\x20r2);\x0a\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(vTint,\x20a);\x0a\x20\x20\x20\x20}\x0a\x20\x20','transparent':!0x0,'depthWrite':!0x1}),pointsField=new a0_0x5014a3['Points'](pGeo,pMat),particlesParent['add'](pointsField),AmbientFlow['createEmitter']());}function particlesOnFrame(_0x57a965){if(!(pGeo&&pMat&&renderer&&camera))return;AmbientFlow['createEmitter'](),AmbientFlow['updateEmitter'](_0x57a965),AmbientFlow['spawnLoop'](_0x57a965);const _0x4a808b=pGeo['getAttribute']('position'),_0x2d7e7d=pGeo['getAttribute']('seed'),_0x110ba8=pGeo['getAttribute']('aBoost'),_0x3c8912=pGeo['getAttribute']('aTint'),_0x342723=pGeo['getAttribute']('aBaseTint'),_0x68e811=renderer['domElement']['width'],_0x359064=renderer['domElement']['height'],_0x18a589=params?.['particleSpeedScale']??0.9,_0x1cc05d=params?.['particleSwirl']??0.5,_0x55c2d9=params?.['particleDamping']??0.9,_0x99c2c5=new a0_0x5014a3['Color'](0x1,0.95,0.2),_0x4d5853=mousePx&&mousePx['x']>=0x0&&mousePx['y']>=0x0,_0x435e9f=_0x4d5853?mousePx['clientX']:0x0,_0x361799=_0x4d5853?mousePx['clientY']:0x0,_0x3ff943=new a0_0x5014a3['Vector3'](0x0,1.15,0x0),_0x5c7d94=new a0_0x5014a3['Vector3'](0x0,0x1,0x0),_0x52a198=new a0_0x5014a3['Vector3'](),_0x13948f=new a0_0x5014a3['Vector3'](),_0x407ffe=new a0_0x5014a3['Vector3']();for(let _0x22620c=0x0;_0x22620c<P_COUNT;_0x22620c++){const _0xc0e7d2=0x3*_0x22620c,_0x58731a=_0x2d7e7d['getZ'](_0x22620c)+_0x57a965*_0x2d7e7d['getY'](_0x22620c)*_0x18a589;_0x2d7e7d['setZ'](_0x22620c,_0x58731a);const _0x1ea2c0=_0x4a808b['array'][_0xc0e7d2],_0x937fc3=_0x4a808b['array'][_0xc0e7d2+0x1],_0x363758=_0x4a808b['array'][_0xc0e7d2+0x2];_0x52a198['set'](_0x1ea2c0,_0x937fc3,_0x363758)['sub'](_0x3ff943);const _0x2cf076=_0x52a198['length']();if(_0x2cf076>0.0001){const _0x492c14=_0x52a198['multiplyScalar'](0x1/_0x2cf076);_0x407ffe['crossVectors'](_0x492c14,_0x5c7d94)['normalize'](),vel[_0xc0e7d2]+=_0x407ffe['x']*_0x1cc05d*_0x57a965,vel[_0xc0e7d2+0x1]+=_0x407ffe['y']*_0x1cc05d*_0x57a965*AmbientFlow['config']['swirlYFactor'],vel[_0xc0e7d2+0x2]+=_0x407ffe['z']*_0x1cc05d*_0x57a965,vel[_0xc0e7d2]+=0.08*Math['cos'](1.3*_0x58731a)*_0x57a965,vel[_0xc0e7d2+0x2]+=0.08*Math['sin'](1.1*_0x58731a)*_0x57a965;}}if(_0x4d5853)for(let _0x1c5ea1=0x0;_0x1c5ea1<P_COUNT;_0x1c5ea1++){const _0x3e8c20=0x3*_0x1c5ea1,_0x402ada=_0x4a808b['array'][_0x3e8c20],_0x5626d6=_0x4a808b['array'][_0x3e8c20+0x1],_0x3f1f4c=_0x4a808b['array'][_0x3e8c20+0x2];_0x13948f['set'](_0x402ada,_0x5626d6,_0x3f1f4c)['project'](camera);const _0x2946c7=(0.5*_0x13948f['x']+0.5)*_0x68e811,_0x269e80=(0.5*_0x13948f['y']+0.5)*_0x359064,_0x78d5b=_0x2946c7-mousePx['x'],_0x17f1d9=_0x269e80-mousePx['y'];if(_0x78d5b*_0x78d5b+_0x17f1d9*_0x17f1d9<=0x1900){_0x110ba8['array'][_0x1c5ea1]=Math['min'](0x64,_0x110ba8['array'][_0x1c5ea1]+0x6*_0x57a965),_0x3c8912['array'][_0x3e8c20+0x0]+=(_0x99c2c5['r']-_0x3c8912['array'][_0x3e8c20+0x0])*Math['min'](0x1,0x6*_0x57a965),_0x3c8912['array'][_0x3e8c20+0x1]+=(_0x99c2c5['g']-_0x3c8912['array'][_0x3e8c20+0x1])*Math['min'](0x1,0x6*_0x57a965),_0x3c8912['array'][_0x3e8c20+0x2]+=(_0x99c2c5['b']-_0x3c8912['array'][_0x3e8c20+0x2])*Math['min'](0x1,0x6*_0x57a965);const _0x44d53c=pointerWorldAtY(_0x435e9f,_0x361799,_0x5626d6),_0x45ae2b=0x10*(_0x44d53c['x']-_0x402ada)-0x4*vel[_0x3e8c20],_0x4a7a76=0x10*(_0x44d53c['z']-_0x3f1f4c)-0x4*vel[_0x3e8c20+0x2];vel[_0x3e8c20]+=_0x45ae2b*_0x57a965,vel[_0x3e8c20+0x2]+=_0x4a7a76*_0x57a965;}else _0x110ba8['array'][_0x1c5ea1]=Math['max'](0x1,_0x110ba8['array'][_0x1c5ea1]-0x3*_0x57a965),_0x3c8912['array'][_0x3e8c20+0x0]+=(_0x342723['array'][_0x3e8c20+0x0]-_0x3c8912['array'][_0x3e8c20+0x0])*Math['min'](0x1,0x3*_0x57a965),_0x3c8912['array'][_0x3e8c20+0x1]+=(_0x342723['array'][_0x3e8c20+0x1]-_0x3c8912['array'][_0x3e8c20+0x1])*Math['min'](0x1,0x3*_0x57a965),_0x3c8912['array'][_0x3e8c20+0x2]+=(_0x342723['array'][_0x3e8c20+0x2]-_0x3c8912['array'][_0x3e8c20+0x2])*Math['min'](0x1,0x3*_0x57a965);}else for(let _0xbae664=0x0;_0xbae664<P_COUNT;_0xbae664++){const _0x1c1c6a=0x3*_0xbae664;_0x110ba8['array'][_0xbae664]=Math['max'](0x1,_0x110ba8['array'][_0xbae664]-0x2*_0x57a965),_0x3c8912['array'][_0x1c1c6a+0x0]+=(_0x342723['array'][_0x1c1c6a+0x0]-_0x3c8912['array'][_0x1c1c6a+0x0])*Math['min'](0x1,0x2*_0x57a965),_0x3c8912['array'][_0x1c1c6a+0x1]+=(_0x342723['array'][_0x1c1c6a+0x1]-_0x3c8912['array'][_0x1c1c6a+0x1])*Math['min'](0x1,0x2*_0x57a965),_0x3c8912['array'][_0x1c1c6a+0x2]+=(_0x342723['array'][_0x1c1c6a+0x2]-_0x3c8912['array'][_0x1c1c6a+0x2])*Math['min'](0x1,0x2*_0x57a965);}const _0x3a8de6=AmbientFlow['state']['mesh']['position'],_0x31bffc=AmbientFlow['config']['returnGain'],_0x4b18e1=AmbientFlow['config']['returnGainY'],_0x31f399=AmbientFlow['config']['recycleRadius2'];for(let _0x48948b=0x0;_0x48948b<P_COUNT;_0x48948b++)if(AmbientFlow['state']['life'][_0x48948b]-=_0x57a965,AmbientFlow['state']['life'][_0x48948b]<=0x0){const _0x13dfde=0x3*_0x48948b,_0x5335e1=_0x4a808b['array'][_0x13dfde],_0x41e25b=_0x4a808b['array'][_0x13dfde+0x1],_0xc8f857=_0x4a808b['array'][_0x13dfde+0x2],_0x49e2d2=_0x3a8de6['x']-_0x5335e1,_0x5c1cd9=_0x3a8de6['y']-_0x41e25b,_0x4b006b=_0x3a8de6['z']-_0xc8f857;vel[_0x13dfde]+=_0x49e2d2*_0x31bffc*_0x57a965,vel[_0x13dfde+0x1]+=_0x5c1cd9*_0x31bffc*_0x4b18e1*_0x57a965,vel[_0x13dfde+0x2]+=_0x4b006b*_0x31bffc*_0x57a965,_0x49e2d2*_0x49e2d2+_0x5c1cd9*_0x5c1cd9+_0x4b006b*_0x4b006b<_0x31f399&&(AmbientFlow['state']['life'][_0x48948b]=0x0);}for(let _0x6001e2=0x0;_0x6001e2<P_COUNT;_0x6001e2++){const _0x510c5d=0x3*_0x6001e2;_0x4a808b['array'][_0x510c5d]+=vel[_0x510c5d]*_0x57a965,_0x4a808b['array'][_0x510c5d+0x1]+=vel[_0x510c5d+0x1]*_0x57a965,_0x4a808b['array'][_0x510c5d+0x2]+=vel[_0x510c5d+0x2]*_0x57a965,vel[_0x510c5d]*=_0x55c2d9,vel[_0x510c5d+0x1]*=_0x55c2d9,vel[_0x510c5d+0x2]*=_0x55c2d9;}_0x4a808b['needsUpdate']=!0x0,_0x2d7e7d['needsUpdate']=!0x0,_0x110ba8['needsUpdate']=!0x0,_0x3c8912['needsUpdate']=!0x0,pMat['uniforms']&&pMat['uniforms']['uPointSizePx']&&(pMat['uniforms']['uPointSizePx']['value']=0x0);}buildParticles(P_COUNT);const params={'renderMode':'solid','saturation':0x1,'pointSize':2.2,'pcAudioReact':!0x0,'pcReactAmount':0.8,'rotationSpeed':0.25,'displacement_amp':0.22,'noise_freq':1.2,'tex_strength':0x1,'reflection_alpha':0.55,'pool_radius':1.6,'pool_softness':1.2,'wobble_amp':0.015,'wobble_freq':1.6,'top_reflection_alpha':0.35,'top_pool_radius':1.4,'top_pool_softness':0.9,'particles':P_COUNT,'particleSpeedScale':0.9,'particlePushStrength':0x5,'particleMargin':0.08,'particleDamping':0.9,'particleSwirl':0.5,'spectrumMode':'points','spectrumSize':0xa,'spectrumRadius':0x2,'spectrumHeight':0.9,'spectrumGain':0x1,'spectrumHueShift':0x0,'spectrumShape':'circle','autoShowBands':!0x0,'showThreshold':0.04,'showSmoothing':0.85,'star_count':0x4e20,'star_radius':0x96,'star_thickness':0x32,'star_color':0xdde6ff,'star_size':1.2,'star_sizeJitter':0.8,'star_opacity':0x1,'star_noiseScale':0.08,'star_noiseBias':0.15,'star_noiseStrength':0.85,'star_noiseDisplace':0x2,'star_twinkleSpeed':0.6,'star_twinkleAmount':0.35,'star_driftSpeed':0.002,'star_seed':0x2a,'star_nebulaEnabled':!0x0,'star_nebulaAmount':0.3,'star_nebulaScale':0.015,'star_nebulaBias':0.5,'star_nebulaSmooth':0.2,'star_nebulaColorA':0x9fb9ff,'star_nebulaColorB':0xffa6a6,'star_bgEnabled':!0x0,'star_bgScale':0x3,'star_bgThreshold':0.69,'star_bgFalloff':0.12,'star_bgPower':0x1,'star_bgVignette':0.5,'star_bgColorA':0x7aa0ff,'star_bgColorB':0xff8fa0};function applyParamSideEffects(_0x1779f0,_0x606684){if(!/^star_/['test'](_0x1779f0))return;const _0x143b85={};switch(_0x1779f0){case'star_count':_0x143b85['count']=0x0|_0x606684;break;case'star_radius':_0x143b85['radius']=+_0x606684;break;case'star_thickness':_0x143b85['thickness']=+_0x606684;break;case'star_color':_0x143b85['color']=_0x606684;break;case'star_size':_0x143b85['size']=+_0x606684;break;case'star_sizeJitter':_0x143b85['sizeJitter']=+_0x606684;break;case'star_opacity':_0x143b85['opacity']=+_0x606684;break;case'star_noiseScale':_0x143b85['noiseScale']=+_0x606684;break;case'star_noiseBias':_0x143b85['noiseBias']=+_0x606684;break;case'star_noiseStrength':_0x143b85['noiseStrength']=+_0x606684;break;case'star_noiseDisplace':_0x143b85['noiseDisplace']=+_0x606684;break;case'star_twinkleSpeed':_0x143b85['twinkleSpeed']=+_0x606684;break;case'star_twinkleAmount':_0x143b85['twinkleAmount']=+_0x606684;break;case'star_driftSpeed':_0x143b85['driftSpeed']=+_0x606684;break;case'star_seed':_0x143b85['seed']=null==_0x606684||''===_0x606684?null:0x0|_0x606684;break;case'star_nebulaEnabled':_0x143b85['nebulaEnabled']=!!_0x606684;break;case'star_nebulaAmount':_0x143b85['nebulaAmount']=+_0x606684;break;case'star_nebulaScale':_0x143b85['nebulaScale']=+_0x606684;break;case'star_nebulaBias':_0x143b85['nebulaBias']=+_0x606684;break;case'star_nebulaSmooth':_0x143b85['nebulaSmooth']=+_0x606684;break;case'star_nebulaColorA':_0x143b85['nebulaColorA']=_0x606684;break;case'star_nebulaColorB':_0x143b85['nebulaColorB']=_0x606684;break;case'star_bgEnabled':_0x143b85['bgEnabled']=!!_0x606684;break;case'star_bgScale':_0x143b85['bgScale']=+_0x606684;break;case'star_bgThreshold':_0x143b85['bgThreshold']=+_0x606684;break;case'star_bgFalloff':_0x143b85['bgFalloff']=+_0x606684;break;case'star_bgPower':_0x143b85['bgPower']=+_0x606684;break;case'star_bgVignette':_0x143b85['bgVignette']=+_0x606684;break;case'star_bgColorA':_0x143b85['bgColorA']=_0x606684;break;case'star_bgColorB':_0x143b85['bgColorB']=_0x606684;}Starfield['configure'](_0x143b85);}function applyStarfieldFromParams(){Starfield['configure']({'count':0x0|params['star_count'],'radius':+params['star_radius'],'thickness':+params['star_thickness'],'color':params['star_color'],'size':+params['star_size'],'sizeJitter':+params['star_sizeJitter'],'opacity':+params['star_opacity'],'noiseScale':+params['star_noiseScale'],'noiseBias':+params['star_noiseBias'],'noiseStrength':+params['star_noiseStrength'],'noiseDisplace':+params['star_noiseDisplace'],'twinkleSpeed':+params['star_twinkleSpeed'],'twinkleAmount':+params['star_twinkleAmount'],'driftSpeed':+params['star_driftSpeed'],'seed':null==params['star_seed']||''===params['star_seed']?null:0x0|params['star_seed'],'nebulaEnabled':!!params['star_nebulaEnabled'],'nebulaAmount':+params['star_nebulaAmount'],'nebulaScale':+params['star_nebulaScale'],'nebulaBias':+params['star_nebulaBias'],'nebulaSmooth':+params['star_nebulaSmooth'],'nebulaColorA':params['star_nebulaColorA'],'nebulaColorB':params['star_nebulaColorB'],'bgEnabled':!!params['star_bgEnabled'],'bgScale':+params['star_bgScale'],'bgThreshold':+params['star_bgThreshold'],'bgFalloff':+params['star_bgFalloff'],'bgPower':+params['star_bgPower'],'bgVignette':+params['star_bgVignette'],'bgColorA':params['star_bgColorA'],'bgColorB':params['star_bgColorB']});}!(function(){try{const _0x30935c=Starfield?.['config'];if(!_0x30935c)return;params['star_count']=_0x30935c['count'],params['star_radius']=_0x30935c['radius'],params['star_thickness']=_0x30935c['thickness'],params['star_color']=_0x30935c['color'],params['star_size']=_0x30935c['size'],params['star_sizeJitter']=_0x30935c['sizeJitter'],params['star_opacity']=_0x30935c['opacity'],params['star_noiseScale']=_0x30935c['noiseScale'],params['star_noiseBias']=_0x30935c['noiseBias'],params['star_noiseStrength']=_0x30935c['noiseStrength'],params['star_noiseDisplace']=_0x30935c['noiseDisplace'],params['star_twinkleSpeed']=_0x30935c['twinkleSpeed'],params['star_twinkleAmount']=_0x30935c['twinkleAmount'],params['star_driftSpeed']=_0x30935c['driftSpeed'],params['star_seed']=_0x30935c['seed'],params['star_nebulaEnabled']=_0x30935c['nebulaEnabled'],params['star_nebulaAmount']=_0x30935c['nebulaAmount'],params['star_nebulaScale']=_0x30935c['nebulaScale'],params['star_nebulaBias']=_0x30935c['nebulaBias'],params['star_nebulaSmooth']=_0x30935c['nebulaSmooth'],params['star_nebulaColorA']=_0x30935c['nebulaColorA'],params['star_nebulaColorB']=_0x30935c['nebulaColorB'],params['star_bgEnabled']=_0x30935c['bgEnabled'],params['star_bgScale']=_0x30935c['bgScale'],params['star_bgThreshold']=_0x30935c['bgThreshold'],params['star_bgFalloff']=_0x30935c['bgFalloff'],params['star_bgPower']=_0x30935c['bgPower'],params['star_bgVignette']=_0x30935c['bgVignette'],params['star_bgColorA']=_0x30935c['bgColorA'],params['star_bgColorB']=_0x30935c['bgColorB'];}catch(_0xa00cf1){}}());const gui=new GUI({'title':'Blob\x20Controls'});syncGuiFromParams();const f0=gui['addFolder']('Render\x20/\x20Look');f0['add'](params,'renderMode',['solid','wireframe','points'])['name']('Render\x20Mode')['onChange'](_0x1a113e=>{const _0xcc2189='points'===_0x1a113e;sphere['visible']=!_0xcc2189,sphereMat['wireframe']='wireframe'===_0x1a113e,spherePoints['visible']=_0xcc2189;}),f0['add'](params,'saturation',0x0,0x2,0.01)['name']('Saturation')['onChange'](_0x1df820=>{sphereMat['uniforms']['uSaturation']['value']=_0x1df820,reflectMatBottom['uniforms']['uSaturation']['value']=_0x1df820,reflectMatTop['uniforms']['uSaturation']['value']=_0x1df820,spherePointsMat['uniforms']['uSaturation']['value']=_0x1df820;}),f0['add'](params,'pointSize',0.05,0.45,0.005)['name']('Point\x20Size\x20(PC)');const fPC=gui['addFolder']('Point\x20Cloud\x20Audio\x20React');fPC['add'](params,'pcAudioReact')['name']('Enable'),fPC['add'](params,'pcReactAmount',0x0,0x3,0.01)['name']('Amount');const f1=gui['addFolder']('Deformation');f1['add'](params,'rotationSpeed',0x0,0x2,0.01)['name']('Rotation\x20Speed'),f1['add'](params,'displacement_amp',0x0,0.8,0.005)['name']('Displacement\x20Amp')['onChange'](_0x2cf9dd=>{sphereMat['uniforms']['uAmp']['value']=_0x2cf9dd,reflectMatBottom['uniforms']['uAmp']['value']=_0x2cf9dd,reflectMatTop['uniforms']['uAmp']['value']=_0x2cf9dd,spherePointsMat['uniforms']['uAmp']['value']=_0x2cf9dd;}),f1['add'](params,'noise_freq',0.1,0x4,0.01)['name']('Noise\x20Freq')['onChange'](_0x39e0f7=>{sphereMat['uniforms']['uFreq']['value']=_0x39e0f7,reflectMatBottom['uniforms']['uFreq']['value']=_0x39e0f7,reflectMatTop['uniforms']['uFreq']['value']=_0x39e0f7,spherePointsMat['uniforms']['uFreq']['value']=_0x39e0f7;}),f1['add'](params,'tex_strength',0x0,0x3,0.01)['name']('Media\x20Strength')['onChange'](_0x24b3a9=>{sphereMat['uniforms']['uTexStrength']['value']=_0x24b3a9,reflectMatBottom['uniforms']['uTexStrength']['value']=_0x24b3a9,reflectMatTop['uniforms']['uTexStrength']['value']=_0x24b3a9,spherePointsMat['uniforms']['uTexStrength']['value']=_0x24b3a9;});const f2=gui['addFolder']('Bottom\x20Reflector\x20/\x20Floor');f2['add'](params,'reflection_alpha',0x0,0x1,0.01)['name']('Opacity')['onChange'](_0x8f678d=>{reflectMatBottom['uniforms']['uAlpha']['value']=_0x8f678d;}),f2['add'](params,'pool_radius',0.2,0x5,0.01)['name']('Bright\x20Radius')['onChange'](_0x26e6c6=>{reflectMatBottom['uniforms']['uR']['value']=_0x26e6c6;}),f2['add'](params,'pool_softness',0.1,0x3,0.01)['name']('Fade\x20Softness')['onChange'](_0x509793=>{reflectMatBottom['uniforms']['uSoft']['value']=_0x509793;}),f2['add'](params,'wobble_amp',0x0,0.05,0.001)['name']('Surface\x20Wobble\x20Amp')['onChange'](_0x5902e5=>{reflectMatBottom['uniforms']['uWobbleAmp']['value']=_0x5902e5,reflectMatTop['uniforms']['uWobbleAmp']['value']=_0x5902e5;}),f2['add'](params,'wobble_freq',0.1,0x4,0.01)['name']('Surface\x20Wobble\x20Freq')['onChange'](_0xf64b5b=>{reflectMatBottom['uniforms']['uWobbleFreq']['value']=_0xf64b5b,reflectMatTop['uniforms']['uWobbleFreq']['value']=_0xf64b5b;});const f2b=gui['addFolder']('Top\x20Reflector\x20/\x20Ceiling');f2b['add'](params,'top_reflection_alpha',0x0,0x1,0.01)['name']('Opacity')['onChange'](_0x35b28d=>{reflectMatTop['uniforms']['uAlpha']['value']=_0x35b28d;}),f2b['add'](params,'top_pool_radius',0.2,0x5,0.01)['name']('Bright\x20Radius')['onChange'](_0x1659f3=>{reflectMatTop['uniforms']['uR']['value']=_0x1659f3;}),f2b['add'](params,'top_pool_softness',0.1,0x3,0.01)['name']('Fade\x20Softness')['onChange'](_0x4620b1=>{reflectMatTop['uniforms']['uSoft']['value']=_0x4620b1;});const f3=gui['addFolder']('Ambient\x20Particles');f3['add'](params,'particles',0x0,0x7530,0x32)['name']('Count')['onFinishChange'](_0x506eb9=>{buildParticles(Math['max'](0x0,Math['floor'](_0x506eb9)));}),f3['add'](params,'particleSpeedScale',0x0,0x3,0.01)['name']('Speed\x20Scale'),f3['add'](params,'particleSwirl',0x0,0x2,0.01)['name']('Swirl'),f3['add'](params,'particlePushStrength',0x0,0x14,0.1)['name']('Push\x20Strength'),f3['add'](params,'particleMargin',0x0,0.3,0.005)['name']('Surface\x20Margin'),f3['add'](params,'particleDamping',0.7,0.99,0.001)['name']('Damping');const f4=gui['addFolder']('Spectrum\x20(Audio)');f4['add'](params,'spectrumMode',['points','line'])['name']('Mode'),f4['add'](params,'spectrumShape',['circle','square','triangle','cross'])['name']('Point\x20Shape')['onChange'](_0x37ece8=>{specMat['uniforms']['uShape']['value']={'circle':0x0,'square':0x1,'triangle':0x2,'cross':0x3}[_0x37ece8]??0x0;}),f4['add'](params,'spectrumSize',0x2,0x18,0.1)['name']('Point\x20Size'),f4['add'](params,'spectrumRadius',1.2,3.5,0.01)['name']('Radius'),f4['add'](params,'spectrumHeight',0.2,0x2,0.01)['name']('Height\x20Scale'),f4['add'](params,'spectrumGain',0.2,0x4,0.01)['name']('Gain'),f4['add'](params,'spectrumHueShift',0x0,0x1,0.001)['name']('Hue\x20Shift'),f4['add'](params,'autoShowBands')['name']('Auto\x20Show\x20When\x20Audio'),f4['add'](params,'showThreshold',0x0,0.2,0.001)['name']('Show\x20Threshold'),f4['add'](params,'showSmoothing',0.5,0.99,0.001)['name']('Show\x20Smooth'),function e(){let _0x31238c=!0x0;if(!_0x31238c||!gui)return void queueMicrotask(e);const _0x1e162e=gui['addFolder']('Starfield');_0x1e162e['close']();const _0x3a0480=_0x1e162e['addFolder']('Distribution');_0x3a0480['close']();const _0x26004c=_0x1e162e['addFolder']('Appearance');_0x26004c['close']();const _0x5195aa=_0x1e162e['addFolder']('Motion\x20/\x20Twinkle');_0x5195aa['close']();const _0x2f4cab=_0x1e162e['addFolder']('Nebula\x20(per-star)');_0x2f4cab['close']();const _0x20b29c=_0x1e162e['addFolder']('Background\x20Sky');_0x20b29c['close']();const _0x5d9e79=_0x1e162e['addFolder']('Randomness');_0x5d9e79['close'](),_0x3a0480['add'](params,'star_count',0x0,0x186a0,0x64)['name']('Count')['onChange'](_0x140526=>{applyParamSideEffects('star_count',_0x140526),schedulePersist();})['listen'](),_0x3a0480['add'](params,'star_radius',0x1,0x7d0,0x1)['name']('Radius')['onChange'](_0x433295=>{applyParamSideEffects('star_radius',_0x433295),schedulePersist();})['listen'](),_0x3a0480['add'](params,'star_thickness',0x0,0x3e8,0x1)['name']('Thickness')['onChange'](_0x4df827=>{applyParamSideEffects('star_thickness',_0x4df827),schedulePersist();})['listen'](),_0x26004c['addColor'](params,'star_color')['name']('Tint')['onChange'](_0x3622e0=>{applyParamSideEffects('star_color',_0x3622e0),schedulePersist();})['listen'](),_0x26004c['add'](params,'star_size',0.1,0x6,0.01)['name']('Size')['onChange'](_0x3d535f=>{applyParamSideEffects('star_size',_0x3d535f),schedulePersist();})['listen'](),_0x26004c['add'](params,'star_sizeJitter',0x0,0x2,0.01)['name']('Size\x20Jitter')['onChange'](_0x4a637b=>{applyParamSideEffects('star_sizeJitter',_0x4a637b),schedulePersist();})['listen'](),_0x26004c['add'](params,'star_opacity',0x0,0x1,0.01)['name']('Opacity')['onChange'](_0x2d8269=>{applyParamSideEffects('star_opacity',_0x2d8269),schedulePersist();})['listen'](),_0x3a0480['add'](params,'star_noiseScale',0.001,0x1,0.001)['name']('Noise\x20Scale')['onChange'](_0x18c995=>{applyParamSideEffects('star_noiseScale',_0x18c995),schedulePersist();})['listen'](),_0x3a0480['add'](params,'star_noiseBias',0x0,0x1,0.001)['name']('Noise\x20Bias')['onChange'](_0x5e8e1b=>{applyParamSideEffects('star_noiseBias',_0x5e8e1b),schedulePersist();})['listen'](),_0x3a0480['add'](params,'star_noiseStrength',0x0,0x2,0.001)['name']('Noise\x20Strength')['onChange'](_0x4f566f=>{applyParamSideEffects('star_noiseStrength',_0x4f566f),schedulePersist();})['listen'](),_0x3a0480['add'](params,'star_noiseDisplace',0x0,0x6,0.01)['name']('Noise\x20Displace')['onChange'](_0x123c6e=>{applyParamSideEffects('star_noiseDisplace',_0x123c6e),schedulePersist();})['listen'](),_0x5195aa['add'](params,'star_twinkleSpeed',0x0,0x4,0.01)['name']('Twinkle\x20Speed')['onChange'](_0xfb2122=>{applyParamSideEffects('star_twinkleSpeed',_0xfb2122),schedulePersist();})['listen'](),_0x5195aa['add'](params,'star_twinkleAmount',0x0,0x1,0.001)['name']('Twinkle\x20Amount')['onChange'](_0x2341ac=>{applyParamSideEffects('star_twinkleAmount',_0x2341ac),schedulePersist();})['listen'](),_0x5195aa['add'](params,'star_driftSpeed',0x0,0.1,0.0005)['name']('Drift\x20Speed')['onChange'](_0xe6401a=>{applyParamSideEffects('star_driftSpeed',_0xe6401a),schedulePersist();})['listen'](),_0x2f4cab['add'](params,'star_nebulaEnabled')['name']('Enable')['onChange'](_0x6992e=>{applyParamSideEffects('star_nebulaEnabled',_0x6992e),schedulePersist();})['listen'](),_0x2f4cab['add'](params,'star_nebulaAmount',0x0,0x1,0.001)['name']('Amount')['onChange'](_0x29bcd4=>{applyParamSideEffects('star_nebulaAmount',_0x29bcd4),schedulePersist();})['listen'](),_0x2f4cab['add'](params,'star_nebulaScale',0.001,0.2,0.001)['name']('Scale')['onChange'](_0x13e26e=>{applyParamSideEffects('star_nebulaScale',_0x13e26e),schedulePersist();})['listen'](),_0x2f4cab['add'](params,'star_nebulaBias',0x0,0x1,0.001)['name']('Bias')['onChange'](_0x34322a=>{applyParamSideEffects('star_nebulaBias',_0x34322a),schedulePersist();})['listen'](),_0x2f4cab['add'](params,'star_nebulaSmooth',0x0,0x1,0.001)['name']('Smooth')['onChange'](_0x3574f4=>{applyParamSideEffects('star_nebulaSmooth',_0x3574f4),schedulePersist();})['listen'](),_0x2f4cab['addColor'](params,'star_nebulaColorA')['name']('Color\x20A')['onChange'](_0x4fc129=>{applyParamSideEffects('star_nebulaColorA',_0x4fc129),schedulePersist();})['listen'](),_0x2f4cab['addColor'](params,'star_nebulaColorB')['name']('Color\x20B')['onChange'](_0x26928d=>{applyParamSideEffects('star_nebulaColorB',_0x26928d),schedulePersist();})['listen'](),_0x20b29c['add'](params,'star_bgEnabled')['name']('Enabled')['onChange'](_0x118d75=>{applyParamSideEffects('star_bgEnabled',_0x118d75),schedulePersist();})['listen'](),_0x20b29c['add'](params,'star_bgScale',0.001,0x6,0.001)['name']('Scale')['onChange'](_0xcc6971=>{applyParamSideEffects('star_bgScale',_0xcc6971),schedulePersist();})['listen'](),_0x20b29c['add'](params,'star_bgThreshold',0x0,0x1,0.001)['name']('Threshold')['onChange'](_0x3b6a4b=>{applyParamSideEffects('star_bgThreshold',_0x3b6a4b),schedulePersist();})['listen'](),_0x20b29c['add'](params,'star_bgFalloff',0x0,0x1,0.001)['name']('Edge\x20Falloff')['onChange'](_0x13e824=>{applyParamSideEffects('star_bgFalloff',_0x13e824),schedulePersist();})['listen'](),_0x20b29c['add'](params,'star_bgPower',0.1,0x4,0.01)['name']('Core\x20Power')['onChange'](_0x10c8e3=>{applyParamSideEffects('star_bgPower',_0x10c8e3),schedulePersist();})['listen'](),_0x20b29c['add'](params,'star_bgVignette',0x0,1.5,0.01)['name']('Vignette')['onChange'](_0x3803df=>{applyParamSideEffects('star_bgVignette',_0x3803df),schedulePersist();})['listen'](),_0x20b29c['addColor'](params,'star_bgColorA')['name']('Sky\x20Color\x20A')['onChange'](_0x1454a1=>{applyParamSideEffects('star_bgColorA',_0x1454a1),schedulePersist();})['listen'](),_0x20b29c['addColor'](params,'star_bgColorB')['name']('Sky\x20Color\x20B')['onChange'](_0x2e1a38=>{applyParamSideEffects('star_bgColorB',_0x2e1a38),schedulePersist();})['listen']();const _0x4c2649={'seed':null==params['star_seed']?'':String(params['star_seed'])};_0x5d9e79['add'](_0x4c2649,'seed')['name']('Seed\x20(int\x20or\x20empty)')['onFinishChange'](_0x3618db=>{const _0x23c094='string'==typeof _0x3618db&&''===_0x3618db['trim']()?null:Number['isFinite'](+_0x3618db)?0x0|_0x3618db:null;params['star_seed']=_0x23c094,applyParamSideEffects('star_seed',_0x23c094),_0x4c2649['seed']=null==params['star_seed']?'':String(params['star_seed']),schedulePersist();})['listen'](),('function'==typeof _0x1e162e['controllersRecursive']?_0x1e162e['controllersRecursive']():_0x1e162e['controllers']||[])['forEach'](_0x46eaa2=>{'function'==typeof _0x46eaa2['listen']&&_0x46eaa2['listen']();});}(),(function(){if(void 0x0===AmbientFlow||!gui)return;AmbientFlow['config']['orbit']=AmbientFlow['config']['orbit']||{};const _0x1a4359=AmbientFlow['config'],_0x50a9d4=_0x223340=>{AmbientFlow['configure'](_0x223340);},_0x539048=()=>{if(_0x1a4359['lifeMin']>_0x1a4359['lifeMax']){const _0x1732ea=_0x1a4359['lifeMin'];_0x1a4359['lifeMin']=_0x1a4359['lifeMax'],_0x1a4359['lifeMax']=_0x1732ea;}},_0x327c9d=gui['addFolder']('Ambient\x20Flow');_0x327c9d['close']();const _0x53b9b2=_0x327c9d['addFolder']('Emission');_0x53b9b2['close']();const _0x423bee=_0x327c9d['addFolder']('Spawn');_0x423bee['close']();const _0x3e956b=_0x327c9d['addFolder']('Orbit');_0x3e956b['close']();const _0x3f8dd6=_0x327c9d['addFolder']('Return');_0x3f8dd6['close']();const _0x3dc225=_0x327c9d['addFolder']('Randomness');_0x3dc225['close'](),_0x53b9b2['add'](_0x1a4359,'emitRate',0x0,0x12c,0x1)['name']('Emit\x20Rate\x20(pps)')['onChange'](_0x15ffaf=>_0x50a9d4({'emitRate':_0x15ffaf}))['listen'](),_0x53b9b2['add'](_0x1a4359,'lifeMin',0.1,0x14,0.05)['name']('Life\x20Min\x20(s)')['onChange'](()=>{_0x539048(),_0x50a9d4({'lifeMin':_0x1a4359['lifeMin'],'lifeMax':_0x1a4359['lifeMax']});})['listen'](),_0x53b9b2['add'](_0x1a4359,'lifeMax',0.1,0x14,0.05)['name']('Life\x20Max\x20(s)')['onChange'](()=>{_0x539048(),_0x50a9d4({'lifeMin':_0x1a4359['lifeMin'],'lifeMax':_0x1a4359['lifeMax']});})['listen'](),_0x423bee['add'](_0x1a4359,'spawnJitter',0x0,0.1,0.001)['name']('Spawn\x20Jitter\x20(m)')['onChange'](_0x203f4c=>_0x50a9d4({'spawnJitter':_0x203f4c}))['listen'](),_0x423bee['add'](_0x1a4359,'kickSpeed',0x0,0x2,0.01)['name']('Kick\x20Speed')['onChange'](_0x4a74f2=>_0x50a9d4({'kickSpeed':_0x4a74f2}))['listen'](),_0x423bee['add'](_0x1a4359,'kickY',0x0,0x1,0.01)['name']('Kick\x20Y')['onChange'](_0x28142f=>_0x50a9d4({'kickY':_0x28142f}))['listen'](),_0x423bee['add'](_0x1a4359,'kickSpread',0x0,0x3,0.01)['name']('Kick\x20Spread')['onChange'](_0x2c633d=>_0x50a9d4({'kickSpread':_0x2c633d}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'rBase',0.2,0x4,0.01)['name']('Radius\x20Base')['onChange'](_0x213789=>_0x50a9d4({'orbit':{'rBase':_0x213789}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'rAmp1',0x0,0x2,0.01)['name']('Radius\x20Amp\x201')['onChange'](_0x542c9b=>_0x50a9d4({'orbit':{'rAmp1':_0x542c9b}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'rFreq1',0x0,0x3,0.01)['name']('Radius\x20Freq\x201')['onChange'](_0x2df992=>_0x50a9d4({'orbit':{'rFreq1':_0x2df992}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'rAmp2',0x0,0x2,0.01)['name']('Radius\x20Amp\x202')['onChange'](_0x3ec8df=>_0x50a9d4({'orbit':{'rAmp2':_0x3ec8df}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'rFreq2',0x0,0x3,0.01)['name']('Radius\x20Freq\x202')['onChange'](_0x32aa6a=>_0x50a9d4({'orbit':{'rFreq2':_0x32aa6a}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'angSpeed',0x0,0x3,0.01)['name']('Angle\x20Speed')['onChange'](_0x90bac1=>_0x50a9d4({'orbit':{'angSpeed':_0x90bac1}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'angOscAmp',0x0,0x2,0.01)['name']('Angle\x20Osc\x20Amp')['onChange'](_0x19aad9=>_0x50a9d4({'orbit':{'angOscAmp':_0x19aad9}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'angOscFreq',0x0,0x3,0.01)['name']('Angle\x20Osc\x20Freq')['onChange'](_0x3c46be=>_0x50a9d4({'orbit':{'angOscFreq':_0x3c46be}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'yBase',0x0,0x3,0.01)['name']('Y\x20Base')['onChange'](_0x97dcb9=>_0x50a9d4({'orbit':{'yBase':_0x97dcb9}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'yAmp',0x0,0x2,0.01)['name']('Y\x20Amp')['onChange'](_0x3bfae9=>_0x50a9d4({'orbit':{'yAmp':_0x3bfae9}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'yOsc1',0x0,0x3,0.01)['name']('Y\x20Freq\x201')['onChange'](_0x231549=>_0x50a9d4({'orbit':{'yOsc1':_0x231549}}))['listen'](),_0x3e956b['add'](_0x1a4359['orbit'],'yOsc2',0x0,0x3,0.01)['name']('Y\x20Freq\x202')['onChange'](_0x434ccc=>_0x50a9d4({'orbit':{'yOsc2':_0x434ccc}}))['listen'](),_0x3f8dd6['add'](_0x1a4359,'returnGain',0x0,0x3c,0.5)['name']('Return\x20Gain')['onChange'](_0x1ae3ff=>_0x50a9d4({'returnGain':_0x1ae3ff}))['listen'](),_0x3f8dd6['add'](_0x1a4359,'returnGainY',0x0,0x2,0.01)['name']('Return\x20Gain\x20Y')['onChange'](_0x1ba525=>_0x50a9d4({'returnGainY':_0x1ba525}))['listen'](),_0x3f8dd6['add'](_0x1a4359,'swirlYFactor',0x0,0x1,0.01)['name']('Swirl\x20Y\x20Factor')['onChange'](_0x30cecc=>_0x50a9d4({'swirlYFactor':_0x30cecc}))['listen']();const _0x1e5ba6={'seed':null==_0x1a4359['seed']?'':String(_0x1a4359['seed'])};_0x3dc225['add'](_0x1e5ba6,'seed')['name']('Seed\x20(int\x20or\x20empty)')['onFinishChange'](_0x5d7afa=>{const _0x42bb71='string'==typeof _0x5d7afa&&''===_0x5d7afa['trim']()?null:Number['isFinite'](+_0x5d7afa)?0x0|_0x5d7afa:null;AmbientFlow['setSeed'](_0x42bb71),_0x1e5ba6['seed']=null==AmbientFlow['config']['seed']?'':String(AmbientFlow['config']['seed']);})['listen'](),('function'==typeof _0x327c9d['controllersRecursive']?_0x327c9d['controllersRecursive']():_0x327c9d['controllers']||[])['forEach'](_0x4efa72=>{'function'==typeof _0x4efa72['listen']&&_0x4efa72['listen']();});}()),gui['close']();{const e='function'==typeof gui?.['controllersRecursive']?gui['controllersRecursive']():Array['isArray'](gui?.['controllers'])?gui['controllers']:[];for(const t of e)'function'==typeof t['listen']&&t['listen']();}function _g(..._0xdf298){console['log']('[GUI]',..._0xdf298);}function _warn(..._0x365bc0){console['warn']('[GUI]',..._0x365bc0);}function findControllerByName(_0x4f3743,_0x478935){if(!_0x4f3743)return null;const _0x48b9e0='function'==typeof _0x4f3743['controllersRecursive']?_0x4f3743['controllersRecursive']():function _0x420527(_0x4a8edf){const _0x374a03=[],_0x47d544=[]['concat'](_0x4a8edf['controllers']||[])['concat'](_0x4a8edf['__controllers']||[])['concat'](_0x4a8edf['_controllers']||[]);for(const _0x4dc786 of _0x47d544)_0x374a03['push'](_0x4dc786);const _0x3e3204=[]['concat'](_0x4a8edf['folders']||[])['concat'](_0x4a8edf['__folders']||[])['concat'](_0x4a8edf['_folders']||[])['concat'](_0x4a8edf['children']||[]);for(const _0x5a3088 of _0x3e3204)if(Array['isArray'](_0x5a3088)){for(const _0x2a04c9 of _0x5a3088)_0x374a03['push'](..._0x420527(_0x2a04c9));}else _0x5a3088&&'object'==typeof _0x5a3088&&_0x374a03['push'](..._0x420527(_0x5a3088));return _0x374a03;}(_0x4f3743);for(const _0x1c5e4a of _0x48b9e0){const _0x559113=_0x1c5e4a['_property']??_0x1c5e4a['property']??_0x1c5e4a['_name'],_0x6606d5=_0x1c5e4a['_name']??_0x1c5e4a['name'];if(_0x559113===_0x478935||_0x6606d5===_0x478935)return _0x1c5e4a;}return null;}function setParamAndGui(_0x9713cd,_0x335508){const _0x1c74cd=params[_0x9713cd];params[_0x9713cd]=_0x335508;const _0x562b33=findControllerByName(gui,_0x9713cd);if(_0x562b33)try{_0x562b33['setValue'](_0x335508),'function'==typeof _0x562b33['updateDisplay']&&_0x562b33['updateDisplay'](),_g('setParamAndGui',{'name':_0x9713cd,'from':_0x1c74cd,'to':_0x335508});}catch(_0xfc01df){_warn('setParamAndGui#setValue\x20failed',{'name':_0x9713cd,'error':_0xfc01df});try{'function'==typeof applyParamSideEffects&&applyParamSideEffects(_0x9713cd,_0x335508);}catch(_0x4aaa91){}}else{try{'function'==typeof applyParamSideEffects&&applyParamSideEffects(_0x9713cd,_0x335508);}catch(_0x12ec23){}_g('setParamAndGui\x20(no\x20controller)',{'name':_0x9713cd,'value':_0x335508});}'function'==typeof schedulePersist&&schedulePersist();}function syncGuiFromParams(){if(!gui)return void _warn('syncGuiFromParams:\x20gui\x20not\x20ready');let _0x4f6164=0x0,_0x14139d=0x0,_0x40d0c0=0x0;for(const [_0x4ea426,_0x5ecead]of Object['entries'](params)){const _0x4826ab=findControllerByName(gui,_0x4ea426);if(_0x4826ab)try{_0x4826ab['setValue'](_0x5ecead),'function'==typeof _0x4826ab['updateDisplay']&&_0x4826ab['updateDisplay'](),_0x4f6164++;}catch(_0x1ca48e){_0x40d0c0++,_warn('syncGuiFromParams#failed',{'key':_0x4ea426,'error':_0x1ca48e});}else _0x14139d++;}_g('syncGuiFromParams',{'updated':_0x4f6164,'missing':_0x14139d,'failed':_0x40d0c0});}function snapshotSettings(_0x26a132='preset'){return{'name':_0x26a132,'ts':Date['now'](),'params':{...params},'camera':{'position':[camera['position']['x'],camera['position']['y'],camera['position']['z']],'target':[controls['target']['x'],controls['target']['y'],controls['target']['z']]}};}function applySettings(_0x454065){if(!_0x454065||!_0x454065['params']||!_0x454065['camera'])return void _warn('applySettings:\x20invalid\x20snapshot');console['group']('[Restore]\x20applySettings',_0x454065['name']??'');let _0x5ed97d=0x0,_0x1a181d=0x0;for(const [_0x299496,_0x4b31f5]of Object['entries'](_0x454065['params']))_0x299496 in params?(setParamAndGui(_0x299496,_0x4b31f5),_0x5ed97d++):(_0x1a181d++,_warn('applySettings:\x20unknown\x20param\x20(ignored)',_0x299496));const _0x9e3abd=Array['isArray'](_0x454065['camera']['position'])?_0x454065['camera']['position']:[0x0,1.6,3.5],_0x34b204=Array['isArray'](_0x454065['camera']['target'])?_0x454065['camera']['target']:[0x0,0.9,0x0];camera['position']['set'](_0x9e3abd[0x0],_0x9e3abd[0x1],_0x9e3abd[0x2]),controls['target']['set'](_0x34b204[0x0],_0x34b204[0x1],_0x34b204[0x2]),camera['updateProjectionMatrix'](),controls['update'](),syncGuiFromParams();try{applyStarfieldFromParams();}catch(_0x34a66c){}let _0x4f4e72=0x0;const _0x13f092=[],_0x364c6d='function'==typeof gui?.['controllersRecursive']?gui['controllersRecursive']():[];for(const _0x820109 of _0x364c6d){const _0x113094=_0x820109['_property']??_0x820109['property']??_0x820109['_name'];if(!(_0x113094 in params))continue;const _0xcf4f79='function'==typeof _0x820109['getValue']?_0x820109['getValue']():_0x820109['_object']?_0x820109['_object'][_0x820109['_property']]:void 0x0,_0x457f1d=params[_0x113094];_0xcf4f79===_0x457f1d||Number['isFinite'](_0xcf4f79)&&Number['isFinite'](_0x457f1d)&&Math['abs'](_0xcf4f79-_0x457f1d)<1e-9||(_0x4f4e72++,_0x13f092['push']({'key':_0x113094,'guiVal':_0xcf4f79,'modelVal':_0x457f1d}));}_0x13f092['length']&&console['table'](_0x13f092),_g('applySettings\x20summary',{'setCount':_0x5ed97d,'skipped':_0x1a181d,'mismatches':_0x4f4e72}),console['groupEnd']();}var __persistTimer=0x0;const __LS_OK=(function(){try{const _0xf377d='__ls_probe__'+Math['random']()['toString'](0x24)['slice'](0x2);return localStorage['setItem'](_0xf377d,'1'),localStorage['removeItem'](_0xf377d),!0x0;}catch(_0x230280){return!0x1;}}());function persistNow(){if(__LS_OK)try{const _0x21a63f={'ts':Date['now'](),'params':{...params},'camera':{'position':[camera['position']['x'],camera['position']['y'],camera['position']['z']],'target':[controls['target']['x'],controls['target']['y'],controls['target']['z']]},'media':playlist&&Number['isInteger'](currentIndex)?{'index':currentIndex,'url':playlist[currentIndex]?.['url']||playlist[currentIndex]?.['src']||null}:{'index':0x0},'loop':!(void 0x0===loopChk||!loopChk||!loopChk['checked'])};localStorage['setItem'](STORAGE_KEY,JSON['stringify'](_0x21a63f)),console['log']('[GUI]\x20persisted');}catch(_0x337b95){console['warn']('[GUI]\x20persistNow\x20failed',_0x337b95);}else console['warn']('[GUI]\x20localStorage\x20unavailable');}function schedulePersist(){clearTimeout(__persistTimer),__persistTimer=setTimeout(persistNow,0x78);}async function restoreFromStorageOrPreset(){console['group']('[Restore]\x20start');let _0x326507=!0x1;if(__LS_OK)try{const _0x121adb=localStorage['getItem'](STORAGE_KEY);if(_0x121adb){const _0x1a1ff3=JSON['parse'](_0x121adb);_0x1a1ff3?.['params']&&_0x1a1ff3?.['camera']&&(applySettings(_0x1a1ff3),'boolean'==typeof _0x1a1ff3['loop']&&void 0x0!==loopChk&&loopChk&&(loopChk['checked']=_0x1a1ff3['loop']),_0x1a1ff3['media']&&Number['isInteger'](_0x1a1ff3['media']['index'])&&(currentIndex=Math['max'](0x0,Math['min'](0x0|_0x1a1ff3['media']['index'],Math['max'](0x0,playlist['length']-0x1)))),'function'==typeof refreshPlaylistSelect&&refreshPlaylistSelect(),_0x326507=!0x0,console['log']('[GUI]\x20restored\x20from\x20localStorage'));}}catch(_0x58d445){console['warn']('[GUI]\x20restore\x20localStorage\x20parse\x20error',_0x58d445);}else console['warn']('[GUI]\x20localStorage\x20unavailable\x20(private\x20mode\x20/\x20blocked)');if(!_0x326507&&'function'==typeof fetch)try{const _0x2c04fd=await fetch('presets/default.json',{'cache':'no-store'});if(_0x2c04fd['ok']){const _0x58fb31=await _0x2c04fd['json']();_0x58fb31?.['params']&&_0x58fb31?.['camera']&&(applySettings(_0x58fb31),_0x58fb31['media']&&Number['isInteger'](_0x58fb31['media']['index'])&&(currentIndex=Math['max'](0x0,Math['min'](0x0|_0x58fb31['media']['index'],Math['max'](0x0,playlist['length']-0x1)))),'function'==typeof refreshPlaylistSelect&&refreshPlaylistSelect(),console['log']('[GUI]\x20restored\x20default.json'));}}catch(_0x3bdda5){console['warn']('[GUI]\x20default\x20preset\x20fetch\x20error',_0x3bdda5);}console['groupEnd']();}const presetFileInput=document['getElementById']('presetFile');presetFileInput?.['addEventListener']('change',async _0x263e31=>{const _0x35a97e=_0x263e31['target']['files']?.[0x0];if(_0x35a97e)try{const _0x24235a=await _0x35a97e['text'](),_0x5ada48=JSON['parse'](_0x24235a);_g('apply\x20from\x20file',_0x35a97e['name']),applySettings(_0x5ada48);}catch(_0x1e6a07){_warn('file\x20load\x20failed',_0x1e6a07);}finally{presetFileInput['value']='';}});const fPresets=gui['addFolder']('Presets');fPresets['add']({'save':()=>{const _0xca0c98=prompt('Preset\x20name:','preset')||'preset',_0x4ec119=snapshotSettings(_0xca0c98),_0x1880fd=new Blob([JSON['stringify'](_0x4ec119,null,0x2)],{'type':'application/json'}),_0x56854d=document['createElement']('a'),_0x215490=new Date()['toISOString']()['replace'](/[:.]/g,'-');_0x56854d['href']=URL['createObjectURL'](_0x1880fd),_0x56854d['download']='player-settings-'+_0x215490+'-'+_0xca0c98+'.json',document['body']['appendChild'](_0x56854d),_0x56854d['click'](),setTimeout(()=>{URL['revokeObjectURL'](_0x56854d['href']),_0x56854d['remove']();},0x0),_g('saved\x20file',_0x56854d['download']);}},'save')['name']('Save\x20to\x20file'),fPresets['add']({'load':()=>{presetFileInput['click']();}},'load')['name']('Load\x20from\x20file'),fPresets['open'](),queueMicrotask(()=>{try{controls?.['addEventListener']?.('change',schedulePersist);}catch(_0x59ad93){}}),window['addEventListener']('beforeunload',persistNow),applyUIVisibility();let controls=new OrbitControls(camera,renderer['domElement']);controls['enableDamping']=!0x0,controls['enablePan']=!0x1,controls['minDistance']=0.1,controls['maxDistance']=0x18,controls['target']['set'](0x0,0.9,0x0),controls['addEventListener']('change',schedulePersist);const probeCanvas=document['createElement']('canvas'),probeCtx=probeCanvas['getContext']('2d',{'willReadFrequently':!0x0});probeCanvas['width']=0x80,probeCanvas['height']=0x80;let probePixels=null;function updateProbe(){if(probeCtx&&probeCanvas){if('webcam'===source['type']||'video'===source['type']){const _0x325c84=source['videoEl'];if(!_0x325c84||_0x325c84['readyState']<0x2||0x0===_0x325c84['videoWidth']||0x0===_0x325c84['videoHeight'])return void(probePixels=null);probeCtx['drawImage'](_0x325c84,0x0,0x0,probeCanvas['width'],probeCanvas['height']);}else{if('image'===source['type']){const _0x2c410b=source['imageEl'];if(!_0x2c410b)return void(probePixels=null);probeCtx['drawImage'](_0x2c410b,0x0,0x0,probeCanvas['width'],probeCanvas['height']);}else{if('audio'!==source['type'])return void(probePixels=null);{const _0x17cc7e=source['spectrumCanvas'];if(!_0x17cc7e)return void(probePixels=null);probeCtx['drawImage'](_0x17cc7e,0x0,0x0,probeCanvas['width'],probeCanvas['height']);}}}try{probePixels=probeCtx['getImageData'](0x0,0x0,probeCanvas['width'],probeCanvas['height'])['data'];}catch(_0x5f5cc8){console['warn']('[Probe]\x20getImageData\x20failed',_0x5f5cc8),probePixels=null;}}else probePixels=null;}function dirToUV(_0x5336e7){return{'u':0.5+Math['atan2'](_0x5336e7['z'],_0x5336e7['x'])/(0x2*Math['PI']),'v':0.5+Math['asin'](a0_0x5014a3['MathUtils']['clamp'](_0x5336e7['y'],-0x1,0x1))/Math['PI']};}const center=new a0_0x5014a3['Vector3'](0x0,1.15,0x0),tmp=new a0_0x5014a3['Vector3'](),up=new a0_0x5014a3['Vector3'](0x0,0x1,0x0),cpuSimplex=new SimplexNoise();function displacedRadiusAtDir(_0x429921,_0x1d37be){const _0x3e0e7c=sphereMat['uniforms']['uFreq']['value'],_0x50203a=sphereMat['uniforms']['uAmp']['value'],_0xc13aba=sphereMat['uniforms']['uTexStrength']['value'],_0x5451d1=cpuSimplex['noise3d'](_0x429921['x']*_0x3e0e7c,_0x429921['y']*_0x3e0e7c+0.25*_0x1d37be,_0x429921['z']*_0x3e0e7c)*(0.35*_0x50203a);let _0x38470c=0x0;if(0x1===sphereMat['uniforms']['uUseTex']['value']&&probePixels){const {u:_0x477411,v:_0x56daa7}=dirToUV(new a0_0x5014a3['Vector3'](-_0x429921['x'],_0x429921['y'],_0x429921['z'])),_0x53727d=Math['min'](probeCanvas['width']-0x1,Math['max'](0x0,Math['floor'](_0x477411*probeCanvas['width']))),_0x597388=0x4*(Math['min'](probeCanvas['height']-0x1,Math['max'](0x0,Math['floor'](_0x56daa7*probeCanvas['height'])))*probeCanvas['width']+_0x53727d);_0x38470c=1.35*_0x50203a*(0.5-(0.2126*(probePixels[_0x597388]/0xff)+0.7152*(probePixels[_0x597388+0x1]/0xff)+0.0722*(probePixels[_0x597388+0x2]/0xff)))*_0xc13aba;}return 0x1+a0_0x5014a3['MathUtils']['clamp'](_0x5451d1+_0x38470c,1.35*-_0x50203a,1.35*_0x50203a);}addEventListener('resize',()=>{camera['aspect']=container['clientWidth']/container['clientHeight'],camera['updateProjectionMatrix'](),renderer['setSize'](container['clientWidth'],container['clientHeight']),particlesOnResize();});const Starfield=((()=>{const _0x43173c={'parent':null,'points':null,'geom':null,'mat':null,'bgMesh':null,'bgGeom':null,'bgMat':null,'t':0x0,'rng':null,'config':{'count':0x7d0,'radius':0x28,'thickness':0x14,'color':0xdde6ff,'size':1.2,'sizeJitter':0.8,'opacity':0x1,'noiseScale':0.08,'noiseBias':0.15,'noiseStrength':0.85,'noiseDisplace':0x2,'twinkleSpeed':0.6,'twinkleAmount':0.35,'driftSpeed':0.002,'seed':0x3039,'nebulaEnabled':!0x0,'nebulaAmount':0.25,'nebulaScale':0.015,'nebulaBias':0.5,'nebulaSmooth':0.2,'nebulaColorA':0x9fb9ff,'nebulaColorB':0xffa6a6,'bgEnabled':!0x0,'bgScale':0.04,'bgThreshold':0.7,'bgFalloff':0.1,'bgPower':1.8,'bgVignette':0.25,'bgColorA':0x7aa0ff,'bgColorB':0xff8fa0}};function _0x12ae6c(_0x447cae){if(null==_0x447cae)return null;let _0x4393ca=0x0|_0x447cae||0x1;return function(){_0x4393ca|=0x0,_0x4393ca=_0x4393ca+0x6d2b79f5|0x0;let _0x182364=Math['imul'](_0x4393ca^_0x4393ca>>>0xf,0x1|_0x4393ca);return _0x182364=_0x182364+Math['imul'](_0x182364^_0x182364>>>0x7,0x3d|_0x182364)^_0x182364,((_0x182364^_0x182364>>>0xe)>>>0x0)/0x100000000;};}function _0x15cb52(){return _0x43173c['rng']?_0x43173c['rng']():Math['random']();}function _0x15e796(){return 0x2*_0x15cb52()-0x1;}function _0x5cc019(_0x1eed9b,_0x182d0,_0x50cdd5){const _0x4c0023=Math['max'](0x0,Math['min'](0x1,(_0x50cdd5-_0x1eed9b)/Math['max'](0.000001,_0x182d0-_0x1eed9b)));return _0x4c0023*_0x4c0023*(0x3-0x2*_0x4c0023);}const _0x1a713c=((()=>{const _0x4cc9df=new Uint8Array(0x100);function _0x10d0ad(_0x38e01a){const _0x266cff=_0x12ae6c(_0x38e01a)||Math['random'];for(let _0x142d68=0x0;_0x142d68<0x100;_0x142d68++)_0x4cc9df[_0x142d68]=_0x142d68;for(let _0x3fc656=0xff;_0x3fc656>0x0;_0x3fc656--){const _0x2e061f=_0x266cff()*(_0x3fc656+0x1)|0x0,_0x4eb92c=_0x4cc9df[_0x3fc656];_0x4cc9df[_0x3fc656]=_0x4cc9df[_0x2e061f],_0x4cc9df[_0x2e061f]=_0x4eb92c;}}_0x10d0ad(0x539);const _0x4b5bc5=new Uint8Array(0x200);function _0x5d3d99(){for(let _0x5c550a=0x0;_0x5c550a<0x200;_0x5c550a++)_0x4b5bc5[_0x5c550a]=_0x4cc9df[0xff&_0x5c550a];}return _0x5d3d99(),{'noise3D':function(_0x2cc416,_0x1c3cb9,_0x52cfac){const _0x576387=Math['floor'](_0x2cc416),_0xbb9fee=Math['floor'](_0x1c3cb9),_0x1505bd=Math['floor'](_0x52cfac),_0x34ea26=_0x2cc416-_0x576387,_0x550fbf=_0x1c3cb9-_0xbb9fee,_0x18f544=_0x52cfac-_0x1505bd,_0xf12e1e=_0x34ea26*_0x34ea26*(0x3-0x2*_0x34ea26),_0xb35c84=_0x550fbf*_0x550fbf*(0x3-0x2*_0x550fbf),_0x104104=_0x18f544*_0x18f544*(0x3-0x2*_0x18f544);function _0xe424a4(_0x5c4f39,_0x54dd36,_0x17f6af){return function(_0x4fa64d,_0x49608d,_0x19ec32){let _0x3616b5=0x165667b1*_0x4fa64d^0x27d4eb2f*_0x49608d^0x7fffffff*_0x19ec32;return _0x3616b5=0x4bf19f61*(_0x3616b5^_0x3616b5>>>0xd),((_0x3616b5^_0x3616b5>>>0x10)>>>0x0)/0xffffffff;}(_0x5c4f39,_0x54dd36,_0x17f6af);}const _0x2c7614=_0xe424a4(_0x576387,_0xbb9fee,_0x1505bd),_0x33e117=_0xe424a4(_0x576387+0x1,_0xbb9fee,_0x1505bd),_0x74a626=_0xe424a4(_0x576387,_0xbb9fee+0x1,_0x1505bd),_0x1c4f90=_0xe424a4(_0x576387+0x1,_0xbb9fee+0x1,_0x1505bd),_0x448644=_0xe424a4(_0x576387,_0xbb9fee,_0x1505bd+0x1),_0x10a327=_0xe424a4(_0x576387+0x1,_0xbb9fee,_0x1505bd+0x1),_0x5303f6=_0xe424a4(_0x576387,_0xbb9fee+0x1,_0x1505bd+0x1),_0xa00aaf=_0x2c7614+(_0x33e117-_0x2c7614)*_0xf12e1e,_0x4fd0ea=_0x448644+(_0x10a327-_0x448644)*_0xf12e1e,_0x42a2de=_0xa00aaf+(_0x74a626+(_0x1c4f90-_0x74a626)*_0xf12e1e-_0xa00aaf)*_0xb35c84;return 0x2*(_0x42a2de+(_0x4fd0ea+(_0x5303f6+(_0xe424a4(_0x576387+0x1,_0xbb9fee+0x1,_0x1505bd+0x1)-_0x5303f6)*_0xf12e1e-_0x4fd0ea)*_0xb35c84-_0x42a2de)*_0x104104)-0x1;},'reseed':function(_0x5abbfb){_0x10d0ad(null==_0x5abbfb?0x539:_0x5abbfb),_0x5d3d99();}};})());function _0x469176(_0xdefaf9){_0x28dd5b(),_0x43173c['parent']=_0xdefaf9,_0x43173c['rng']=_0x12ae6c(_0x43173c['config']['seed']),_0x1a713c['reseed'](null==_0x43173c['config']['seed']?0x539:_0x43173c['config']['seed']);const {count:_0x5509c1,radius:_0x3bc091,thickness:_0x2aa1ec,noiseScale:_0xed8ed9,noiseBias:_0x5a85dc,noiseStrength:_0x598bb4,noiseDisplace:_0x312e3d,color:_0x6aa8e1,size:_0x404b5b,sizeJitter:_0x44a365,opacity:_0xd59ba2}=_0x43173c['config'];if(_0x43173c['config']['bgEnabled']){const _0x555818=0x2710;_0x43173c['bgGeom']=new a0_0x5014a3['SphereGeometry'](_0x555818,0x40,0x30);const _0x493fc6=new a0_0x5014a3['Color'](_0x43173c['config']['bgColorA']),_0x412e3b=new a0_0x5014a3['Color'](_0x43173c['config']['bgColorB']),_0xba802a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vDir;\x0a\x20\x20\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20wp\x20=\x20modelMatrix\x20*\x20vec4(position,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vDir\x20=\x20normalize(wp.xyz);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20viewMatrix\x20*\x20wp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20',_0x2c9081='\x0a\x20\x20\x20\x20\x20\x20\x20\x20precision\x20highp\x20float;\x0a\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vDir;\x0a\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20\x20uA,\x20uB;\x0a\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uScale;\x0a\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uThreshold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uFalloff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uPower;\x0a\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uVignette;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20value-noise\x20FBM\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20hash(vec3\x20p){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20=\x20fract(p*0.3183099\x20+\x20vec3(0.1,0.2,0.3));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p\x20*=\x2017.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20fract(p.x*p.y*p.z*(p.x+p.y+p.z));\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20vnoise(vec3\x20p){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20i=floor(p),\x20f=fract(p);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20u=f*f*(3.0-2.0*f);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n000=hash(i+vec3(0,0,0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n100=hash(i+vec3(1,0,0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n010=hash(i+vec3(0,1,0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n110=hash(i+vec3(1,1,0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n001=hash(i+vec3(0,0,1));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n101=hash(i+vec3(1,0,1));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n011=hash(i+vec3(0,1,1));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n111=hash(i+vec3(1,1,1));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20nx00=mix(n000,n100,u.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20nx10=mix(n010,n110,u.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20nx01=mix(n001,n101,u.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20nx11=mix(n011,n111,u.x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20nxy0=mix(nx00,nx10,u.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20nxy1=mix(nx01,nx11,u.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20mix(nxy0,nxy1,u.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20fbm(vec3\x20p){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20a=0.5,f=1.0,s=0.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(int\x20i=0;i<5;i++){\x20s+=a*vnoise(p*f);\x20f*=2.0;\x20a*=0.5;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20sstep(float\x20e0,float\x20e1,float\x20x){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20t=clamp((x-e0)/max(1e-6,e1-e0),0.0,1.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20t*t*(3.0-2.0*t);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20dir\x20=\x20normalize(vDir);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n\x20\x20\x20=\x20fbm(dir\x20*\x20uScale);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20m\x20\x20\x20=\x20sstep(uThreshold\x20-\x20uFalloff,\x20uThreshold\x20+\x20uFalloff,\x20n);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20m\x20=\x20pow(m,\x20uPower);\x20//\x20concentrate\x20patch\x20cores\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20gentle\x20horizon\x20darkening;\x20keeps\x20zenith\x20brighter\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20horizon\x20=\x20pow(max(0.0,\x20dir.y*0.5\x20+\x200.5),\x20uVignette*2.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20vig\x20=\x20mix(1.0,\x200.85,\x20horizon);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20color\x20inside\x20patches\x20only;\x20outside\x20stays\x20black\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20cloud\x20=\x20mix(uA,\x20uB,\x20n)\x20*\x20vig;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20color\x20=\x20mix(vec3(0.0),\x20cloud,\x20m);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20opaque\x20write\x20(no\x20blending);\x20draws\x20first;\x20never\x20tints\x20scene\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(color,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20';_0x43173c['bgMat']=new a0_0x5014a3['ShaderMaterial']({'uniforms':{'uA':{'value':_0x493fc6},'uB':{'value':_0x412e3b},'uScale':{'value':_0x43173c['config']['bgScale']},'uThreshold':{'value':_0x43173c['config']['bgThreshold']},'uFalloff':{'value':_0x43173c['config']['bgFalloff']},'uPower':{'value':_0x43173c['config']['bgPower']},'uVignette':{'value':_0x43173c['config']['bgVignette']}},'vertexShader':_0xba802a,'fragmentShader':_0x2c9081,'transparent':!0x1,'depthWrite':!0x1,'depthTest':!0x1,'side':a0_0x5014a3['BackSide'],'toneMapped':!0x1}),_0x43173c['bgMesh']=new a0_0x5014a3['Mesh'](_0x43173c['bgGeom'],_0x43173c['bgMat']),_0x43173c['bgMesh']['renderOrder']=-0x3e8,_0x43173c['bgMesh']['frustumCulled']=!0x1,_0x43173c['parent']['add'](_0x43173c['bgMesh']);}const _0x57de8f=new Float32Array(0x3*_0x5509c1),_0x5d44ba=new Float32Array(_0x5509c1),_0x2abd6b=new Float32Array(_0x5509c1),_0x5d2a75=new Float32Array(0x3*_0x5509c1),_0x203965=new a0_0x5014a3['Color'](_0x6aa8e1),_0x536334=new a0_0x5014a3['Color'](_0x43173c['config']['nebulaColorA']),_0x1141fa=new a0_0x5014a3['Color'](_0x43173c['config']['nebulaColorB']);let _0x567b45=0x0,_0x1c943c=0x0,_0x4abc2c=0x14*_0x5509c1;for(;_0x567b45<_0x5509c1&&_0x1c943c++<_0x4abc2c;){let _0x446f2a=_0x15e796(),_0x5cfe6a=_0x15e796(),_0x57f5c1=_0x15e796();const _0x417e67=Math['hypot'](_0x446f2a,_0x5cfe6a,_0x57f5c1)||0x1;_0x446f2a/=_0x417e67,_0x5cfe6a/=_0x417e67,_0x57f5c1/=_0x417e67;const _0x3febe2=_0x3bc091+((_0x2aa1ec>0x0?_0x15cb52():0x0)-0.5)*_0x2aa1ec;let _0x311cb1=_0x446f2a*_0x3febe2,_0x5d95e0=_0x5cfe6a*_0x3febe2,_0x18a85c=_0x57f5c1*_0x3febe2;const _0x117876=0.5*(_0x1a713c['noise3D'](_0x311cb1*_0xed8ed9,_0x5d95e0*_0xed8ed9,_0x18a85c*_0xed8ed9)+0x1),_0x104306=_0x598bb4<=0x0?0x1:(_0x117876-_0x5a85dc)*(0x1/Math['max'](0.000001,0x1-_0x5a85dc));if(_0x15cb52()>Math['max'](0x0,Math['min'](0x1,_0x104306)))continue;const _0x42e56d=_0x312e3d*(_0x117876-0.5);_0x311cb1+=_0x446f2a*_0x42e56d,_0x5d95e0+=_0x5cfe6a*_0x42e56d,_0x18a85c+=_0x57f5c1*_0x42e56d;const _0x5d1c80=0x3*_0x567b45;_0x57de8f[_0x5d1c80+0x0]=_0x311cb1,_0x57de8f[_0x5d1c80+0x1]=_0x5d95e0,_0x57de8f[_0x5d1c80+0x2]=_0x18a85c;const _0x4d112d=_0x404b5b*(0x1+_0x44a365*_0x15e796());_0x5d44ba[_0x567b45]=Math['max'](0.1,_0x4d112d),_0x2abd6b[_0x567b45]=_0x15cb52();let _0x4e00d9=_0x203965['clone']();if(_0x43173c['config']['nebulaEnabled']){const _0x126623=_0x43173c['config']['nebulaScale'],_0x3a1824=0.5*(_0x1a713c['noise3D'](_0x311cb1*_0x126623,_0x5d95e0*_0x126623,_0x18a85c*_0x126623)+0x1),_0x216fab=_0x43173c['config']['nebulaSmooth'],_0x283e12=_0x5cc019(_0x43173c['config']['nebulaBias']-_0x216fab,_0x43173c['config']['nebulaBias']+_0x216fab,_0x3a1824),_0x47b2a4=_0x536334['clone']()['lerp'](_0x1141fa,_0x283e12);_0x4e00d9['lerp'](_0x47b2a4,_0x43173c['config']['nebulaAmount']);}_0x5d2a75[_0x5d1c80+0x0]=_0x4e00d9['r'],_0x5d2a75[_0x5d1c80+0x1]=_0x4e00d9['g'],_0x5d2a75[_0x5d1c80+0x2]=_0x4e00d9['b'],_0x567b45++;}const _0x172de8=_0x567b45;_0x43173c['geom']=new a0_0x5014a3['BufferGeometry'](),_0x43173c['geom']['setAttribute']('position',new a0_0x5014a3['BufferAttribute'](_0x57de8f['subarray'](0x0,0x3*_0x172de8),0x3)),_0x43173c['geom']['setAttribute']('aSize',new a0_0x5014a3['BufferAttribute'](_0x5d44ba['subarray'](0x0,_0x172de8),0x1)),_0x43173c['geom']['setAttribute']('aPhase',new a0_0x5014a3['BufferAttribute'](_0x2abd6b['subarray'](0x0,_0x172de8),0x1)),_0x43173c['geom']['setAttribute']('aColor',new a0_0x5014a3['BufferAttribute'](_0x5d2a75['subarray'](0x0,0x3*_0x172de8),0x3)),(_0x43173c['mat']=new a0_0x5014a3['ShaderMaterial']({'uniforms':{'uOpacity':{'value':_0xd59ba2},'uSizeBase':{'value':0x0},'uTwinkleAmount':{'value':_0x43173c['config']['twinkleAmount']},'uTwinkleTime':{'value':0x0}},'vertexShader':'\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uSizeBase;\x0a\x20\x20\x20\x20\x20\x20attribute\x20float\x20aSize;\x0a\x20\x20\x20\x20\x20\x20attribute\x20float\x20aPhase;\x0a\x20\x20\x20\x20\x20\x20attribute\x20vec3\x20\x20aColor;\x0a\x20\x20\x20\x20\x20\x20varying\x20float\x20vPhase;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20\x20vColor;\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vPhase\x20=\x20aPhase;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vColor\x20=\x20aColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20mv\x20=\x20modelViewMatrix\x20*\x20vec4(position,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20distScale\x20=\x20300.0\x20/\x20max(1.0,\x20-mv.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_PointSize\x20=\x20max(1.0,\x20(aSize\x20+\x20uSizeBase)\x20*\x20distScale);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20mv;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','fragmentShader':'\x0a\x20\x20\x20\x20\x20\x20precision\x20highp\x20float;\x0a\x20\x20\x20\x20\x20\x20varying\x20vec3\x20\x20vColor;\x0a\x20\x20\x20\x20\x20\x20varying\x20float\x20vPhase;\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uOpacity;\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTwinkleAmount;\x0a\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTwinkleTime;\x0a\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20uv\x20=\x20gl_PointCoord\x20*\x202.0\x20-\x201.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20r2\x20=\x20dot(uv,\x20uv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(r2\x20>\x201.0)\x20discard;\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20soft\x20\x20\x20=\x201.0\x20-\x20smoothstep(0.6,\x201.0,\x20r2);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20radial\x20=\x20pow(soft,\x203.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20tw\x20\x20\x20\x20\x20=\x200.5\x20+\x200.5\x20*\x20sin(6.28318\x20*\x20(uTwinkleTime\x20+\x20vPhase));\x0a\x20\x20\x20\x20\x20\x20\x20\x20float\x20twMix\x20\x20=\x20mix(1.0\x20-\x20uTwinkleAmount,\x201.0,\x20tw);\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(vColor,\x20uOpacity\x20*\x20radial\x20*\x20twMix);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','transparent':!0x0,'depthWrite':!0x1}),_0x43173c['points']=new a0_0x5014a3['Points'](_0x43173c['geom'],_0x43173c['mat']),_0x43173c['points']['renderOrder']=0x1,_0x43173c['points']['frustumCulled']=!0x1,_0x43173c['parent']['add'](_0x43173c['points']));}function _0x28dd5b(){_0x43173c['parent']&&_0x43173c['points']&&_0x43173c['parent']['remove'](_0x43173c['points']),_0x43173c['geom']&&_0x43173c['geom']['dispose'](),_0x43173c['mat']&&_0x43173c['mat']['dispose'](),_0x43173c['parent']&&_0x43173c['bgMesh']&&_0x43173c['parent']['remove'](_0x43173c['bgMesh']),_0x43173c['bgGeom']&&_0x43173c['bgGeom']['dispose'](),_0x43173c['bgMat']&&_0x43173c['bgMat']['dispose'](),_0x43173c['points']=_0x43173c['geom']=_0x43173c['mat']=null,_0x43173c['bgMesh']=_0x43173c['bgGeom']=_0x43173c['bgMat']=null;}return{'create':function(_0x36c332,_0x22ebaa={}){Object['assign'](_0x43173c['config'],_0x22ebaa),_0x43173c['rng']=_0x12ae6c(_0x43173c['config']['seed']),_0x469176(_0x36c332);},'update':function(_0xe109f6){_0x43173c['points']&&_0x43173c['mat']&&(_0x43173c['t']+=_0xe109f6,_0x43173c['mat']['uniforms']['uTwinkleTime']['value']=_0x43173c['t']*_0x43173c['config']['twinkleSpeed'],0x0!==_0x43173c['config']['driftSpeed']&&(_0x43173c['points']['rotation']['y']+=_0x43173c['config']['driftSpeed']*_0xe109f6));},'dispose':_0x28dd5b,'configure':function(_0x1daddf={}){const _0x136ba1=['count','radius','thickness','noiseScale','noiseBias','noiseStrength','noiseDisplace','seed','color','nebulaEnabled','nebulaAmount','nebulaScale','nebulaBias','nebulaSmooth','nebulaColorA','nebulaColorB','bgEnabled','bgScale','bgThreshold','bgFalloff','bgPower','bgVignette'],_0x162ba8=['size','sizeJitter','opacity','twinkleAmount'];let _0x28bd30=!0x1,_0x26d545=!0x1,_0x438490=!0x1;for(const _0x351476 of Object['keys'](_0x1daddf))_0x43173c['config'][_0x351476]=_0x1daddf[_0x351476],_0x136ba1['includes'](_0x351476)&&(_0x28bd30=!0x0),_0x162ba8['includes'](_0x351476)&&(_0x26d545=!0x0),['bgScale','bgThreshold','bgFalloff','bgPower','bgVignette','bgColorA','bgColorB']['includes'](_0x351476)&&(_0x438490=!0x0);Object['prototype']['hasOwnProperty']['call'](_0x1daddf,'seed')&&(_0x43173c['rng']=_0x12ae6c(_0x43173c['config']['seed']),_0x1a713c['reseed'](null==_0x43173c['config']['seed']?0x539:_0x43173c['config']['seed']),_0x28bd30=!0x0),_0x28bd30&&_0x43173c['parent']?_0x469176(_0x43173c['parent']):(_0x26d545&&_0x43173c['mat']&&(_0x43173c['mat']['uniforms']['uOpacity']['value']=_0x43173c['config']['opacity'],_0x43173c['mat']['uniforms']['uTwinkleAmount']['value']=_0x43173c['config']['twinkleAmount']),_0x438490&&_0x43173c['bgMat']&&(_0x43173c['bgMat']['uniforms']['uScale']['value']=_0x43173c['config']['bgScale'],_0x43173c['bgMat']['uniforms']['uThreshold']['value']=_0x43173c['config']['bgThreshold'],_0x43173c['bgMat']['uniforms']['uFalloff']['value']=_0x43173c['config']['bgFalloff'],_0x43173c['bgMat']['uniforms']['uPower']['value']=_0x43173c['config']['bgPower'],_0x43173c['bgMat']['uniforms']['uVignette']['value']=_0x43173c['config']['bgVignette'],_0x43173c['bgMat']['uniforms']['uA']['value']['set'](_0x43173c['config']['bgColorA']),_0x43173c['bgMat']['uniforms']['uB']['value']['set'](_0x43173c['config']['bgColorB'])));},'state':_0x43173c,'config':_0x43173c['config']};})());Starfield['create'](scene,{'count':0x4e20,'radius':0x96,'thickness':0x32,'seed':0x2a,'nebulaEnabled':!0x0,'nebulaAmount':0.3,'bgEnabled':!0x0,'bgScale':0x3,'bgThreshold':0.69,'bgFalloff':0.12,'bgPower':0x1,'bgVignette':0.5});const CameraFly=((()=>{const _0x3780d4={'active':!0x1,'mode':0x0,'prevMode':0x0,'t':0x0,'pos':new a0_0x5014a3['Vector3'](),'look':new a0_0x5014a3['Vector3'](0x0,0x1,0x0),'blend':0x1,'blendDur':1.25,'posLerp':0.18,'lookLerp':0.22,'lookBlend':0x1,'lookBlendDur':0.8,'_cancelHandlersAttached':!0x1,'lookObj':null},_0x9f64e2=new a0_0x5014a3['Vector3'](0x0,0x1,0x0),_0x66f8d1=[_0x5d83bb=>{const _0x375ceb=1.6+0.9*Math['sin'](0.6*_0x5d83bb);return new a0_0x5014a3['Vector3'](0x0,_0x375ceb,0.0001);},_0x66403c=>{const _0x3e4c03=0.22*_0x66403c+0.35*Math['sin'](0.17*_0x66403c),_0x520b3c=1.6+0.25*Math['sin'](0.27*_0x66403c);return new a0_0x5014a3['Vector3'](3.6*Math['cos'](_0x3e4c03),_0x520b3c,4.2*Math['sin'](_0x3e4c03));},_0x428ce1=>{const _0x4ebdbe=0.38*_0x428ce1+0.6*Math['sin'](0.11*_0x428ce1),_0x261d4e=1.3+0.45*Math['sin'](0.63*_0x428ce1)*Math['cos'](0.21*_0x428ce1);return new a0_0x5014a3['Vector3'](2.2*Math['cos'](_0x4ebdbe),_0x261d4e,2.8*Math['sin'](_0x4ebdbe));},_0x432a95=>{const _0x5c9abd=5.2+0.6*Math['sin'](0.2*_0x432a95),_0x1ee90b=0.14*_0x432a95+0.25*Math['sin'](0.07*_0x432a95),_0x3a1f16=2.2+0.6*Math['sin'](0.33*_0x432a95);return new a0_0x5014a3['Vector3'](Math['cos'](_0x1ee90b)*_0x5c9abd,_0x3a1f16,Math['sin'](_0x1ee90b)*_0x5c9abd);},_0x4b6b57=>{const _0x3e0e0e=0.28*_0x4b6b57,_0x4d1a16=1.4+1.8*Math['sin'](_0x3e0e0e),_0x25725b=3.2*Math['cos'](_0x3e0e0e),_0x1fe8c5=(0.6+0.25*Math['sin'](0.2*_0x4b6b57))*Math['cos'](0x2*_0x3e0e0e+0.5*Math['sin'](0.35*_0x4b6b57));return new a0_0x5014a3['Vector3'](_0x1fe8c5,_0x4d1a16,_0x25725b);},_0x2b0a14=>{const _0xa71458=0.42*_0x2b0a14+0.2*Math['sin'](0.5*_0x2b0a14),_0x240b50=1.2+1.2*Math['sin'](_0xa71458),_0x27f74a=2.2*Math['cos'](_0xa71458),_0xfb0379=(0.9+0.35*Math['sin'](0.27*_0x2b0a14+Math['sin'](0.13*_0x2b0a14)))*Math['sin'](2.6*_0xa71458+0.6*Math['sin'](0.31*_0x2b0a14));return new a0_0x5014a3['Vector3'](_0xfb0379,_0x240b50,_0x27f74a);},_0x4dd2bf=>{const _0x27056c=0.2*_0x4dd2bf,_0x4da9ee=0.35*Math['sin'](0.15*_0x4dd2bf),_0x1c1054=2.4+0.4*Math['sin'](0.18*_0x4dd2bf),_0x5d6574=0x4+0.6*Math['sin'](0.11*_0x4dd2bf+0.3),_0x27644e=1.6+_0x1c1054*Math['sin'](_0x27056c+_0x4da9ee),_0x4c090f=_0x5d6574*Math['cos'](_0x27056c-_0x4da9ee),_0x37813c=(1.2+0.5*Math['sin'](0.22*_0x4dd2bf)+0.2*Math['sin'](0.47*_0x4dd2bf))*Math['cos'](1.8*_0x27056c+0.8*Math['sin'](0.19*_0x4dd2bf));return new a0_0x5014a3['Vector3'](_0x37813c,_0x27644e,_0x4c090f);},_0x1d2f14=>{const _0x44e26d=1.5+1.2*Math['sin'](0.6*_0x1d2f14),_0x4cf4bf=3.4+0.4*Math['sin'](0.21*_0x1d2f14),_0x2621b0=0.35*Math['sin'](0.33*_0x1d2f14),_0x546fbf=Math['cos'](_0x2621b0)*_0x4cf4bf,_0x36bea4=Math['sin'](_0x2621b0)*_0x4cf4bf;return new a0_0x5014a3['Vector3'](_0x546fbf,_0x44e26d,_0x36bea4);},_0x5b913c=>{const _0x308e8c=6.4+0.7*Math['sin'](0.18*_0x5b913c),_0x29252c=0.1*_0x5b913c+0.45*Math['sin'](0.09*_0x5b913c),_0x4921cd=1.4+0.25*Math['sin'](0.38*_0x5b913c);return new a0_0x5014a3['Vector3'](Math['cos'](_0x29252c)*_0x308e8c,_0x4921cd,Math['sin'](_0x29252c)*_0x308e8c);},_0x30de70=>{const _0x1c344b=3.3+0.5*Math['sin'](0.27*_0x30de70),_0x5d249d=0.26*_0x30de70+0.35*Math['sin'](0.14*_0x30de70),_0x3556d4=1.2+0.5*Math['sin'](0.52*_0x30de70)*Math['cos'](0.19*_0x30de70);return new a0_0x5014a3['Vector3'](Math['cos'](_0x5d249d)*_0x1c344b,_0x3556d4,Math['sin'](_0x5d249d)*_0x1c344b);}],_0x277bbf=_0x279934=>_0x279934<0x0?0x0:_0x279934>0x1?0x1:_0x279934<0.5?0x4*_0x279934*_0x279934*_0x279934:0x1-Math['pow'](-0x2*_0x279934+0x2,0x3)/0x2;function _0x3614f2(_0x4daaf4){return 0x9===_0x4daaf4&&void 0x0!==AmbientFlow&&AmbientFlow['state']?.['mesh']?.['position']?AmbientFlow['state']['mesh']['position']:0x1===_0x4daaf4&&_0x3780d4['lookObj']?_0x3780d4['lookObj']['getWorldPosition']?_0x3780d4['lookObj']['getWorldPosition'](new a0_0x5014a3['Vector3']()):_0x3780d4['lookObj']['position']:_0x9f64e2;}function _0x2b0309(_0xa34518){const _0x1d6a06=a0_0x5014a3['MathUtils']['clamp'](0x0|_0xa34518,0x0,_0x66f8d1['length']-0x1),_0x58ad9a=_0x3614f2(_0x3780d4['active']?_0x3780d4['mode']:_0x1d6a06)!==_0x3614f2(_0x1d6a06)||0x1===_0x1d6a06&&!_0x3780d4['lookObj']||0x1!==_0x1d6a06&&0x1===_0x3780d4['mode'];if(!_0x3780d4['active'])return _0x3780d4['active']=!0x0,_0x3780d4['mode']=_0x1d6a06,_0x3780d4['prevMode']=_0x1d6a06,_0x3780d4['blend']=0x1,_0x3780d4['lookBlend']=0x1,_0x3780d4['t']=0x0,_0x3780d4['pos']['copy'](camera['position']),_0x3780d4['look']['copy'](_0x3614f2(_0x1d6a06)),controls&&(controls['enabled']=!0x1),void(function(){if(_0x3780d4['_cancelHandlersAttached'])return;_0x3780d4['_onPointerDown']=()=>_0x1d1cd7(),_0x3780d4['_onWheel']=()=>_0x1d1cd7(),renderer['domElement']['addEventListener']('pointerdown',_0x3780d4['_onPointerDown'],{'passive':!0x0}),renderer['domElement']['addEventListener']('wheel',_0x3780d4['_onWheel'],{'passive':!0x0}),_0x3780d4['_cancelHandlersAttached']=!0x0;}());_0x1d6a06!==_0x3780d4['mode']&&(_0x3780d4['prevMode']=_0x3780d4['mode'],_0x3780d4['mode']=_0x1d6a06,_0x3780d4['blend']=0x0,_0x3780d4['lookBlend']=_0x58ad9a?0x0:_0x3780d4['lookBlend']);}function _0x1d1cd7(){_0x3780d4['active']&&(_0x3780d4['active']=!0x1,_0x3780d4['blend']=0x1,_0x3780d4['lookBlend']=0x1,controls&&(controls['enabled']=!0x0),(function(){if(!_0x3780d4['_cancelHandlersAttached'])return;renderer['domElement']['removeEventListener']('pointerdown',_0x3780d4['_onPointerDown']),renderer['domElement']['removeEventListener']('wheel',_0x3780d4['_onWheel']),_0x3780d4['_cancelHandlersAttached']=!0x1;}()));}return window['addEventListener']('keydown',_0x258e11=>{'0'===_0x258e11['key']?_0x2b0309(0x0):'1'===_0x258e11['key']?_0x2b0309(0x1):'2'===_0x258e11['key']?_0x2b0309(0x2):'3'===_0x258e11['key']?_0x2b0309(0x3):'4'===_0x258e11['key']?_0x2b0309(0x4):'5'===_0x258e11['key']?_0x2b0309(0x5):'6'===_0x258e11['key']?_0x2b0309(0x6):'7'===_0x258e11['key']?_0x2b0309(0x7):'8'===_0x258e11['key']?_0x2b0309(0x8):'9'===_0x258e11['key']?_0x2b0309(0x9):'Escape'===_0x258e11['key']&&_0x1d1cd7();}),{'start':_0x2b0309,'stop':_0x1d1cd7,'update':function(_0x196774){if(!_0x3780d4['active'])return;_0x3780d4['t']+=_0x196774;const _0x1d9f98=_0x66f8d1[_0x3780d4['prevMode']](_0x3780d4['t']),_0x1f0760=_0x66f8d1[_0x3780d4['mode']](_0x3780d4['t']);_0x3780d4['blend']<0x1&&(_0x3780d4['blend']=Math['min'](0x1,_0x3780d4['blend']+_0x196774/Math['max'](0.0001,_0x3780d4['blendDur'])));const _0xc894f0=_0x277bbf(_0x3780d4['blend']),_0x1068ea=_0x1d9f98['lerp'](_0x1f0760,_0xc894f0);_0x3780d4['lookBlend']<0x1&&(_0x3780d4['lookBlend']=Math['min'](0x1,_0x3780d4['lookBlend']+_0x196774/Math['max'](0.0001,_0x3780d4['lookBlendDur'])));const _0x5a3376=_0x277bbf(_0x3780d4['lookBlend']),_0x4d9a69=_0x3614f2(_0x3780d4['mode']),_0x2ce25b=0x1-Math['pow'](0x1-_0x3780d4['posLerp'],Math['max'](0x1,Math['round'](0x3c*_0x196774))),_0x2d8df4=(0x1-Math['pow'](0x1-_0x3780d4['lookLerp'],Math['max'](0x1,Math['round'](0x3c*_0x196774))))*(0.35+0.65*_0x5a3376);_0x3780d4['pos']['lerp'](_0x1068ea,_0x2ce25b),_0x3780d4['look']['lerp'](_0x4d9a69,_0x2d8df4),camera['position']['copy'](_0x3780d4['pos']),camera['lookAt'](_0x3780d4['look']),controls&&controls['target']&&controls['target']['copy'](_0x3780d4['look']);},'setLookTarget':function(_0x4a2fa1){_0x3780d4['lookObj']=_0x4a2fa1&&_0x4a2fa1['isObject3D']?_0x4a2fa1:null;},'state':_0x3780d4};})());async function eraseAppData({clearAllLocalStorage:_0x3b9f25=!0x1,reload:_0xe47275=!0x0}={}){const _0x10b3c2={'localStorage':{'before':0x0,'after':0x0,'removedKeys':[],'clearedAll':!!_0x3b9f25,'error':null},'indexedDB':{'deletedNames':[],'error':null},'caches':{'deletedKeys':[],'error':null}};try{'undefined'!=typeof persistTimer&&clearTimeout(persistTimer);}catch(_0x1ff1ff){}try{if(_0x10b3c2['localStorage']['before']=localStorage['length'],_0x3b9f25){const _0x412c7f=[];for(let _0x4b0a06=0x0;_0x4b0a06<localStorage['length'];_0x4b0a06++)_0x412c7f['push'](localStorage['key'](_0x4b0a06));_0x10b3c2['localStorage']['removedKeys']=_0x412c7f['slice'](),localStorage['clear']();}else null!==localStorage['getItem'](STORAGE_KEY)&&_0x10b3c2['localStorage']['removedKeys']['push'](STORAGE_KEY),localStorage['removeItem'](STORAGE_KEY);_0x10b3c2['localStorage']['after']=localStorage['length'];}catch(_0x284402){_0x10b3c2['localStorage']['error']=String(_0x284402);}try{if(indexedDB&&'function'==typeof indexedDB['databases']){const _0x5bea92=await indexedDB['databases']();if(Array['isArray'](_0x5bea92))for(const _0x3b3e77 of _0x5bea92){const _0x106356=_0x3b3e77?.['name'];_0x106356&&(await new Promise(_0x1049a7=>{const _0xc7c028=indexedDB['deleteDatabase'](_0x106356);_0xc7c028['onsuccess']=_0xc7c028['onerror']=_0xc7c028['onblocked']=()=>_0x1049a7();}),_0x10b3c2['indexedDB']['deletedNames']['push'](_0x106356));}}else{const _0x1cefaa=['localforage','keyval-store','idb-keyval','app-db','threejs-cache'];for(const _0x4399e5 of _0x1cefaa)await new Promise(_0x17681f=>{const _0x5a0041=indexedDB['deleteDatabase'](_0x4399e5);_0x5a0041['onsuccess']=_0x5a0041['onerror']=_0x5a0041['onblocked']=()=>_0x17681f();});_0x10b3c2['indexedDB']['deletedNames']=_0x1cefaa;}}catch(_0x417f37){_0x10b3c2['indexedDB']['error']=String(_0x417f37);}try{if('undefined'!=typeof caches&&caches?.['keys']){const _0x34ea83=await caches['keys']();for(const _0x4286cd of _0x34ea83){await caches['delete'](_0x4286cd)&&_0x10b3c2['caches']['deletedKeys']['push'](_0x4286cd);}}}catch(_0x34c22a){_0x10b3c2['caches']['error']=String(_0x34c22a);}return _0xe47275&&location['reload'](),_0x10b3c2;}CameraFly['setLookTarget'](DEFAULT_ATTRACTOR?.['dot']||null),(function(){if(!gui)return;const _0x5189fc=gui['addFolder']('Storage');_0x5189fc['add']({'Erase\x20/\x20Reset…':async function(){if(!confirm('This\x20will\x20remove\x20saved\x20app\x20data.\x0a\x0aYou\x20can\x20choose:\x0a•\x20KEY\x20—\x20remove\x20only\x20this\x20app\x20save\x20(recommended)\x0a•\x20ALL\x20—\x20clear\x20ALL\x20localStorage\x20keys\x0a\x0aProceed?'))return;const _0x10bd79=(prompt('Type:\x0a\x20\x20ALL\x20\x20→\x20clear\x20ALL\x20localStorage\x20keys\x0a\x20\x20KEY\x20\x20→\x20remove\x20only\x20this\x20app\x20save\x0a\x0aEnter\x20your\x20choice:','KEY')||'')['trim']()['toUpperCase']();if('ALL'!==_0x10bd79&&'KEY'!==_0x10bd79)return void alert('Cancelled:\x20unknown\x20choice.\x20Use\x20ALL\x20or\x20KEY.');const _0x21f5e8='ALL'===_0x10bd79,_0x19d713=await eraseAppData({'clearAllLocalStorage':_0x21f5e8,'reload':!0x1}),_0x22723a=['Cleanup\x20complete.','','LocalStorage:\x20'+(_0x21f5e8?'CLEARED\x20ALL\x20KEYS':'Removed\x20['+(_0x19d713['localStorage']['removedKeys']['join'](',\x20')||'none')+']'),'LocalStorage\x20count:\x20'+_0x19d713['localStorage']['before']+'\x20→\x20'+_0x19d713['localStorage']['after'],'IndexedDB\x20deleted:\x20'+(_0x19d713['indexedDB']['deletedNames']['length']?_0x19d713['indexedDB']['deletedNames']['join'](',\x20'):'none'),'Caches\x20deleted:\x20'+(_0x19d713['caches']['deletedKeys']['length']?_0x19d713['caches']['deletedKeys']['join'](',\x20'):'none')];alert(_0x22723a['join']('\x0a')),confirm('Reload\x20now\x20to\x20apply\x20a\x20fully\x20clean\x20state?')&&location['reload']();}},'Erase\x20/\x20Reset…')['name']('Erase\x20/\x20Reset…'),_0x5189fc['open']();}());let last=performance['now'](),audioVisibilityLevel=0x0,__loggedVideoWarn=!0x1;function tick(_0x172542=performance['now']()){const _0xa29e18=(_0x172542-last)/0x3e8;last=_0x172542,shared['uTime']['value']+=_0xa29e18;const _0x527893='none'===source['type'],_0xca13bf=sphereMat['uniforms']['uUseTex']&&0x0===sphereMat['uniforms']['uUseTex']['value'],_0x2658fb=_0x527893&&_0xca13bf?0x1:0x0,_0x2d39bf=0.35*shared['uTime']['value'];sphereMat['uniforms']['uRainbowOn']&&(sphereMat['uniforms']['uRainbowOn']['value']=_0x2658fb,sphereMat['uniforms']['uRainbowRot']['value']=_0x2d39bf),reflectMatBottom['uniforms']['uRainbowOn']&&(reflectMatBottom['uniforms']['uRainbowOn']['value']=_0x2658fb,reflectMatBottom['uniforms']['uRainbowRot']['value']=_0x2d39bf),reflectMatTop['uniforms']['uRainbowOn']&&(reflectMatTop['uniforms']['uRainbowOn']['value']=_0x2658fb,reflectMatTop['uniforms']['uRainbowRot']['value']=_0x2d39bf),spherePointsMat['uniforms']['uRainbowOn']&&(spherePointsMat['uniforms']['uRainbowOn']['value']=_0x2658fb,spherePointsMat['uniforms']['uRainbowRot']['value']=_0x2d39bf),particlesOnFrame(_0xa29e18),updateAttractors(_0xa29e18),Starfield['update'](_0xa29e18);const _0x8571a8=_0xa29e18*params['rotationSpeed'];if(sphere['rotation']['y']+=_0x8571a8,mirrorBottom['rotation']['y']=sphere['rotation']['y'],mirrorTop['rotation']['y']=sphere['rotation']['y'],spherePoints['rotation']['y']=sphere['rotation']['y'],analyser&&freqData&&analyser['getByteFrequencyData'](freqData),'audio'===source['type']&&drawSpectrumTexture(),updateProbe(),pointsField){const _0x1a6fad=pGeo['getAttribute']('position'),_0x38f66e=pGeo['getAttribute']('seed'),_0x4e7fd1=params['particleSpeedScale'],_0x246ad0=params['particlePushStrength'],_0xd93e9=params['particleMargin'],_0xb23bd0=params['particleDamping'],_0x4105a0=params['particleSwirl'];for(let _0x244c95=0x0;_0x244c95<P_COUNT;_0x244c95++){const _0x53575f=0x3*_0x244c95,_0x300888=_0x1a6fad['array'][_0x53575f],_0xeac968=_0x1a6fad['array'][_0x53575f+0x1],_0x256d4a=_0x1a6fad['array'][_0x53575f+0x2];tmp['set'](_0x300888,_0xeac968,_0x256d4a)['sub'](center);const _0x218170=tmp['length']();if(_0x218170>0.0001){const _0x420a6d=tmp['multiplyScalar'](0x1/_0x218170),_0x407687=displacedRadiusAtDir(_0x420a6d,shared['uTime']['value'])+_0xd93e9;if(_0x218170<_0x407687){const _0xf14c9c=(_0x407687-_0x218170)*_0x246ad0;vel[_0x53575f]+=_0x420a6d['x']*_0xf14c9c*_0xa29e18,vel[_0x53575f+0x1]+=_0x420a6d['y']*_0xf14c9c*_0xa29e18*0.4,vel[_0x53575f+0x2]+=_0x420a6d['z']*_0xf14c9c*_0xa29e18;}const _0x3d4dff=new a0_0x5014a3['Vector3']()['crossVectors'](_0x420a6d,up)['normalize']();vel[_0x53575f]+=_0x3d4dff['x']*_0x4105a0*_0xa29e18,vel[_0x53575f+0x1]+=_0x3d4dff['y']*_0x4105a0*_0xa29e18*0.25,vel[_0x53575f+0x2]+=_0x3d4dff['z']*_0x4105a0*_0xa29e18;const _0x5c2fbe=_0x38f66e['getY'](_0x244c95),_0x5be83b=_0x38f66e['getZ'](_0x244c95)+_0xa29e18*_0x5c2fbe*_0x4e7fd1;_0x38f66e['setZ'](_0x244c95,_0x5be83b),vel[_0x53575f]+=0.08*Math['cos'](1.3*_0x5be83b)*_0xa29e18,vel[_0x53575f+0x2]+=0.08*Math['sin'](1.1*_0x5be83b)*_0xa29e18;}_0x1a6fad['array'][_0x53575f]+=vel[_0x53575f]*_0xa29e18,_0x1a6fad['array'][_0x53575f+0x1]+=vel[_0x53575f+0x1]*_0xa29e18,_0x1a6fad['array'][_0x53575f+0x2]+=vel[_0x53575f+0x2]*_0xa29e18,vel[_0x53575f]*=_0xb23bd0,vel[_0x53575f+0x1]*=_0xb23bd0,vel[_0x53575f+0x2]*=_0xb23bd0;}_0x1a6fad['needsUpdate']=!0x0,_0x38f66e['needsUpdate']=!0x0;}let _0x5c7b5c=0x0;if(analyser&&freqData){let _0x5a39ca=0x0,_0x4046ff=0x0;for(let _0x5783ec=0x8;_0x5783ec<0x40;_0x5783ec++)_0x5a39ca+=freqData[_0x5783ec],_0x4046ff++;_0x5c7b5c=_0x5a39ca/Math['max'](0x1,_0x4046ff)/0xff;const _0x32472c=specGeo['getAttribute']('position'),_0x9c9c8a=specGeo['getAttribute']('aColor'),_0x214b75=params['spectrumRadius'];specMat['uniforms']['uSize']['value']=params['spectrumSize'];for(let _0x426b72=0x0;_0x426b72<0x80;_0x426b72++){const _0x1b0351=_0x426b72/0x80*Math['PI']*0x2,_0x1484db=0x3*_0x426b72,_0x204a45=(freqData[_0x426b72]||0x0)/0xff,_0x14ff0e=0.5*_0x204a45*params['spectrumGain'],_0x3540bd=_0x204a45*params['spectrumHeight'],_0x4f04af=_0x214b75+_0x14ff0e;_0x32472c['array'][_0x1484db+0x0]=Math['cos'](_0x1b0351)*_0x4f04af,_0x32472c['array'][_0x1484db+0x1]=1.15+_0x3540bd,_0x32472c['array'][_0x1484db+0x2]=Math['sin'](_0x1b0351)*_0x4f04af;const _0x5d139b=(_0x426b72/0x80+params['spectrumHueShift'])%0x1,[_0x3960ac,_0x6918e9,_0x5f2007]=hslToRgb(_0x5d139b,0x1,a0_0x5014a3['MathUtils']['clamp'](0.35+0.5*_0x204a45,0x0,0x1));_0x9c9c8a['array'][_0x1484db+0x0]=_0x3960ac,_0x9c9c8a['array'][_0x1484db+0x1]=_0x6918e9,_0x9c9c8a['array'][_0x1484db+0x2]=_0x5f2007,specPosLine[_0x1484db+0x0]=_0x32472c['array'][_0x1484db+0x0],specPosLine[_0x1484db+0x1]=_0x32472c['array'][_0x1484db+0x1],specPosLine[_0x1484db+0x2]=_0x32472c['array'][_0x1484db+0x2],specColLine[_0x1484db+0x0]=_0x3960ac,specColLine[_0x1484db+0x1]=_0x6918e9,specColLine[_0x1484db+0x2]=_0x5f2007;}_0x32472c['needsUpdate']=!0x0,_0x9c9c8a['needsUpdate']=!0x0,specGeoLine['getAttribute']('position')['needsUpdate']=!0x0,specGeoLine['getAttribute']('color')['needsUpdate']=!0x0;}if(params['autoShowBands']){audioVisibilityLevel=audioVisibilityLevel*params['showSmoothing']+_0x5c7b5c*(0x1-params['showSmoothing']);const _0x38efe8=audioVisibilityLevel>params['showThreshold'];spectrumPoints['visible']=_0x38efe8&&'points'===params['spectrumMode'],spectrumLine['visible']=_0x38efe8&&'line'===params['spectrumMode'];}const _0x2839ce=params['pointSize'],_0x320910=params['pcAudioReact']?0x1+params['pcReactAmount']*_0x5c7b5c:0x1;spherePointsMat['uniforms']['uPointSize']['value']=_0x2839ce*_0x320910,'webcam'===source['type']&&source['tex']?source['tex']['needsUpdate']=!0x0:'video'===source['type']&&(source['videoEl']&&videoHasFrame(source['videoEl'])?source['tex']&&(source['tex']['needsUpdate']=!0x0):__loggedVideoWarn||(__loggedVideoWarn=!0x0)),CameraFly['update'](_0xa29e18),controls&&controls['update'](),renderer['render'](scene,camera),requestAnimationFrame(tick);}function hideOverlay(){const _0x45b23f=document['querySelector']('.ui-overlay');_0x45b23f&&(_0x45b23f['style']['display']='none',_0x45b23f['setAttribute']('aria-hidden','true'));}async function beginFrom(_0x1731d9){if(await ensureAudioCtx(),audioCtx&&'suspended'===audioCtx['state'])try{await audioCtx['resume']();}catch{}hideOverlay(),'manual'===_0x1731d9&&playlist['length']&&loadPlaylistIndex(currentIndex);}tick(),document['getElementById']('overlayCTA')?.['addEventListener']('click',()=>beginFrom('manual'));const searchToggle=document['getElementById']('searchToggle'),searchPanel=document['getElementById']('searchPanel'),searchInput=document['getElementById']('searchInput'),searchResults=document['getElementById']('searchResults');function openSearch(){searchPanel['classList']['remove']('hidden'),searchInput['value']='',renderSearchResults(playlist),searchInput['focus']();}function closeSearch(){searchPanel['classList']['add']('hidden'),searchInput['blur']();}function renderSearchResults(_0x7f36dd){searchResults['innerHTML']='';const _0x7a4945=document['createDocumentFragment']();for(let _0x3b1801=0x0;_0x3b1801<Math['min'](_0x7f36dd['length'],0x1f4);_0x3b1801++){const _0x300ca8=_0x7f36dd[_0x3b1801],_0x13c28a=document['createElement']('li');_0x13c28a['dataset']['ix']=String(_0x300ca8['__ix']??_0x3b1801);const _0x335348=document['createElement']('span');_0x335348['className']='badge',_0x335348['textContent']=_0x300ca8['type'];const _0x32c183=document['createElement']('span');_0x32c183['className']='label',_0x32c183['textContent']=_0x300ca8['label'],_0x13c28a['appendChild'](_0x335348),_0x13c28a['appendChild'](_0x32c183),_0x13c28a['addEventListener']('click',async()=>{const _0x3afbb7=parseInt(_0x13c28a['dataset']['ix'],0xa);currentIndex=_0x3afbb7,refreshPlaylistSelect(),await loadPlaylistIndex(_0x3afbb7),closeSearch();}),_0x7a4945['appendChild'](_0x13c28a);}searchResults['appendChild'](_0x7a4945);}let _searchTimer=0x0;function doFilter(_0x44f066){const _0x88557e=_0x44f066['trim']()['toLowerCase']();if(!_0x88557e)return void renderSearchResults(playlist['map']((_0x3edf66,_0x4141dc)=>Object['assign']({'__ix':_0x4141dc},_0x3edf66)));const _0x1f3e3b=[];for(let _0x49501c=0x0;_0x49501c<playlist['length'];_0x49501c++){const _0xf40a93=playlist[_0x49501c];(_0xf40a93['label']||'')['toLowerCase']()['includes'](_0x88557e)&&_0x1f3e3b['push'](Object['assign']({'__ix':_0x49501c},_0xf40a93));}renderSearchResults(_0x1f3e3b);}function debounceFilter(){clearTimeout(_searchTimer),_searchTimer=setTimeout(()=>doFilter(searchInput['value']),0x78);}searchToggle['addEventListener']('click',()=>{searchPanel['classList']['contains']('hidden')?openSearch():closeSearch();}),searchInput['addEventListener']('input',debounceFilter),document['addEventListener']('keydown',_0x4abb4d=>{if('/'!==_0x4abb4d['key']||_0x4abb4d['ctrlKey']||_0x4abb4d['metaKey']||_0x4abb4d['altKey']){if('Escape'===_0x4abb4d['key'])searchPanel['classList']['contains']('hidden')||closeSearch();else{if('Enter'===_0x4abb4d['key']&&!searchPanel['classList']['contains']('hidden')){const _0x5d00a8=searchResults['querySelector']('li');_0x5d00a8&&_0x5d00a8['click']();}}}else _0x4abb4d['preventDefault'](),openSearch();});const _origRefresh=refreshPlaylistSelect;refreshPlaylistSelect=function(){_origRefresh(),searchPanel['classList']['contains']('hidden')||doFilter(searchInput['value']);},(function(){const _0x6da71e=document['getElementById']('uiToggleBtn');_0x6da71e&&_0x6da71e['addEventListener']('click',function(){const _0x13a31e={'key':'Escape','code':'Escape','keyCode':0x1b,'which':0x1b,'bubbles':!0x0,'cancelable':!0x0};document['dispatchEvent'](new KeyboardEvent('keydown',_0x13a31e)),window['dispatchEvent'](new KeyboardEvent('keydown',_0x13a31e)),document['dispatchEvent'](new KeyboardEvent('keyup',_0x13a31e)),window['dispatchEvent'](new KeyboardEvent('keyup',_0x13a31e));},{'passive':!0x0});}());const helpBtn=document['getElementById']('helpBtn'),helpModal=document['getElementById']('shortcutsModal'),helpClose=document['getElementById']('helpClose');function openShortcuts(){helpModal&&helpModal['classList']['remove']('hidden');}function closeShortcuts(){helpModal&&helpModal['classList']['add']('hidden');}function toggleShortcuts(){helpModal&&helpModal['classList']['toggle']('hidden');}helpBtn?.['addEventListener']('click',toggleShortcuts),helpClose?.['addEventListener']('click',closeShortcuts),helpModal?.['addEventListener']('click',_0x4d807d=>{_0x4d807d['target']===helpModal&&closeShortcuts();}),document['addEventListener']('keydown',_0x440f49=>{const _0x314138=_0x440f49['key']||_0x440f49['code']||'',_0x25b5df=helpModal&&!helpModal['classList']['contains']('hidden');if(!_0x25b5df&&('?'===_0x314138||'/'===_0x314138&&_0x440f49['shiftKey'])){const _0x2cb40d=_0x440f49['target'],_0x2e1111=_0x2cb40d?.['tagName']?.['toUpperCase']?.()||'';if(_0x2cb40d?.['isContentEditable']||'INPUT'===_0x2e1111||'TEXTAREA'===_0x2e1111||'SELECT'===_0x2e1111)return;return _0x440f49['preventDefault'](),void toggleShortcuts();}if(_0x25b5df&&'Escape'===_0x314138)return _0x440f49['preventDefault'](),_0x440f49['stopImmediatePropagation'](),void closeShortcuts();_0x25b5df&&_0x440f49['stopImmediatePropagation']();}),(function(){const _0x3c3283=document['documentElement'],_0x262090=document['getElementById']('themeToggle'),_0x7832eb=_0x262090?_0x262090['querySelector']('img'):null;function _0x44ca44(_0x1b4873){try{localStorage['setItem']('theme',_0x1b4873);}catch{}}function _0x1d1558(){const _0x3b7017=_0x3c3283['getAttribute']('data-theme');if('dark'===_0x3b7017||'light'===_0x3b7017)return _0x3b7017;return window['matchMedia']&&window['matchMedia']('(prefers-color-scheme:\x20dark)')['matches']?'dark':'light';}function _0x56bb1a(_0x10166a){const _0x20b0a4='dark'===_0x10166a||'light'===_0x10166a?_0x10166a:'light';_0x3c3283['setAttribute']('data-theme',_0x20b0a4),_0x44ca44(_0x20b0a4),_0x7832eb&&('dark'===_0x20b0a4?(_0x7832eb['src']='media/icons/sun.svg',_0x7832eb['alt']='Light\x20mode'):(_0x7832eb['src']='media/icons/moon.svg',_0x7832eb['alt']='Dark\x20mode'));}const _0x4395b8=(function(){try{return localStorage['getItem']('theme');}catch{return null;}}());_0x4395b8||(_0x3c3283['setAttribute']('data-theme','dark'),_0x44ca44('dark')),_0x56bb1a(_0x4395b8||_0x1d1558()),_0x262090&&(_0x262090['onclick']=()=>{_0x56bb1a('dark'===_0x1d1558()?'light':'dark');});}());